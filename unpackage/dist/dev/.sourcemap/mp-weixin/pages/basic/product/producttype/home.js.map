{"version":3,"sources":["uni-app:///main.js","webpack:///D:/MyRepository/EasySmartData/code/AftersveClientApp/pages/basic/product/producttype/home.vue?6841","webpack:///D:/MyRepository/EasySmartData/code/AftersveClientApp/pages/basic/product/producttype/home.vue?ba30","webpack:///D:/MyRepository/EasySmartData/code/AftersveClientApp/pages/basic/product/producttype/home.vue?a423","webpack:///D:/MyRepository/EasySmartData/code/AftersveClientApp/pages/basic/product/producttype/home.vue?a1ad","uni-app:///pages/basic/product/producttype/home.vue"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,+G;AACAA,UAAU,CAACC,aAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAiH;AACjH;AACwD;AACL;;;AAGnD;AAC6L;AAC7L,gBAAgB,2LAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,+EAAM;AACR,EAAE,wFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,mFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,8OAEN;AACP,KAAK;AACL;AACA,aAAa,8OAEN;AACP,KAAK;AACL;AACA,aAAa,sQAEN;AACP;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC3CA;AAAA;AAAA;AAAA;AAAmuB,CAAgB,orBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC6CvvB;;AAEA;AACA,+H;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAdA;;;;;;;;;;oXAcA;AACA,U,eACA,EACA,cACA,sBADA,EADA,EAIA,IAJA,kBAIA,CACA,SACA;AACA,oBAFA,EAGA,iBAHA,EAGA;AACA,kBAJA,EAIA;AACA,iBACA,gBADA,EACA;AACA,gCAFA,EAGA,uBAHA,EAIA,sBAJA,EALA,EAUA;AACA,0BAXA,EAWA;AACA,mBAZA,EAYA;AACA;AACA,kDAdA,EAcA;AACA,yCAfA,EAeA;AACA,uBAhBA,EAiBA,qBAjBA,CAiBA;AAjBA,MAmBA,CAxBA,EAyBA,kCACA;AACA,iBACA,oBACA,wBACA,wBALA,CAKA;AAEA,GAhCA,EAiCA,WACA;AACA;;OAGA,wCACA,6EACA,mBACA,qBACA,CAJA,CAIA;AACA,wEACA,CAXA,EAYA;AAEA;;OAGA,qCACA,oBACA,qBAFA,CAEA;AACA,KApBA,EAqBA;;UAGA,wCACA,mBACA,oDACA,qBAHA,CAGA;AACA,KA5BA,EA6BA;;UAGA,4CACA,gBACA,WADA,EAEA,sBAFA;AAGA;AACA;AACA;AACA;AACA,SAPA;;AASA,KA1CA;AA2CA;AACA;;;AAGA,iBA/CA,2BA+CA;AACA;AACA;AACA;AACA,OAFA;AAGA,KApDA;AAqDA;AACA;;;AAGA,oBAzDA,8BAyDA;AACA;AACA,wBADA;;AAGA;AACA;AACA;AACA,OAHA,EAGA,IAHA;AAIA,KAjEA;AAkEA;;;AAGA;AACA;AACA,+DADA;AAEA;AACA,gDADA,EAFA;;AAKA,qBALA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAjBA;AAkBA;AACA;AACA;AACA,SArBA;;AAuBA,KA7FA;AA8FA;;;AAGA;AACA;AACA,wBADA;;AAGA;AACA,oEADA;AAEA;AACA,gDADA,EAFA;;AAKA,sBALA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BADA;;AAGA;AACA;AACA;AACA;AACA,0CADA;AAEA,0BAFA;;AAIA;AACA;AACA;AACA,4BADA;AAEA,wBAFA;;AAIA,SA5BA;AA6BA;AACA;AACA;AACA;AACA,yBADA;AAEA,wBAFA;;AAIA,SApCA;;AAsCA;AACA;AA5IA,GAjCA,E","file":"pages/basic/product/producttype/home.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/basic/product/producttype/home.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./home.vue?vue&type=template&id=54ebc61f&\"\nvar renderjs\nimport script from \"./home.vue?vue&type=script&lang=js&\"\nexport * from \"./home.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/basic/product/producttype/home.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./home.vue?vue&type=template&id=54ebc61f&\"","var components\ntry {\n  components = {\n    isLogin: function() {\n      return import(\n        /* webpackChunkName: \"components/is-login/is-login\" */ \"@/components/is-login/is-login.vue\"\n      )\n    },\n    uniFab: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-fab/components/uni-fab/uni-fab\" */ \"@/uni_modules/uni-fab/components/uni-fab/uni-fab.vue\"\n      )\n    },\n    categoryAdd: function() {\n      return import(\n        /* webpackChunkName: \"components/category-add/category-add\" */ \"@/components/category-add/category-add.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./home.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./home.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"flex flex-direction \">\r\n\t\t<!-- 判断是否登录 -->\r\n\t\t<is-login currentPage=\"index\"></is-login>\r\n\t\t<cu-custom bgColor=\"bg-cyan\" :isBack=\"preview\">\r\n\t\t\t<block slot=\"content\">产品分类</block>\r\n\t\t</cu-custom>\r\n\t\t<!-- 修改后的树形图 -->\r\n\t\t<xiaolu-tree v-slot:default=\"{item}\" v-if=\"category_list.length>0\" max=\"7\" \r\n\t\t\t  :trees=\"category_list\"  >\r\n\t\t\t<!-- 内容插槽 -->\r\n\t\t\t<template >\r\n\t\t\t\t<view class=\"cf\" style=\"width: 90vw;\" >\r\n\t\t\t\t\t<view class=\"fl text-df margin-left\">{{ item.name }}</view>\r\n\t\t\t\t\t<view class=\"fr flex justify-end\" >\r\n\t\t\t\t\t\t<view class=\"cu-tag bg-cyan round\" :data-id=\"item.id\" ><text class=\"cuIcon-edit\"></text></view>\r\n\t\t\t\t\t\t<view class=\"cu-tag bg-red round\" :data-id=\"item.id\" ><text class=\"cuIcon-delete\"></text></view>\r\n\t\t\t\t\t\t<navigator :url=\"'/pages/basic/product/productmodel/home?preview=true&catogoryId=' + item.id \" class=\"cu-tag bg-cyan light round\" >型号</navigator>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</template>\r\n\t\t</xiaolu-tree>\r\n\t\t<!-- 弹出悬浮框 -->\r\n\t\t<uni-fab ref=\"fab\" :pattern=\"pattern\"  horizontal=\"left\" vertical=\"bottom\"\r\n\t\t\tdirection=\"horizontal\" @fabClick=\"addCategory\" />\r\n\t\t<!-- 添加/编辑产品分类 -->\r\n\t\t<view v-if=\"editModalShow\">\r\n\t\t\t<category-add :MchId=\"MchId\" :Token=\"Token\" :isEdit=\"isEdit\" \r\n\t\t\t\t:categoryId=\"currentCategoryId\" ></category-add>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\t/**\r\n\t * 产品分类\r\n\t * @author 陆彦捷\r\n\t * @date 2021.06.23 总体样式\r\n\t * @date 2021.06.30 删除设备分类、\r\n\t * @date 2021.07.06 产品分类样式修改\r\n\t * @date 2021.07.13 xiaolu-tree 插件内不能包含点击事件，否则会显示错误（暂时只做显示）\r\n\t * @date 2021.07.23 重新引用login\r\n\t * @description  产品分类的基础\r\n\t * @注： 这里的树形图是可搜索的\r\n\t */\r\n\timport organ from '@/common/storage/organstorage.js'; // 组织\r\n\timport XiaoluTree from '@/components/xiaolu-tree/tree.vue';\t\t// 无限分类树\r\n\timport categories from '@/common/data/category.js' // 分类展示\r\n\timport changeobj from '@/common/function/changeobjectecordname.js'; // 格式化值\r\n\tvar _self;\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\tXiaoluTree\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\t// 页面样式\r\n\t\t\t\tpreview: false,\r\n\t\t\t\tforceIndex: false, // 强制不判断，不跳转\r\n\t\t\t\tready: false, // 这里用于自主控制loading加载状态，避免异步正在加载数据的空档显示“暂无数据”\r\n\t\t\t\tpattern: {\r\n\t\t\t\t\tcolor: '#7A7E83', // 文字默认颜色\r\n\t\t\t\t\tselectedColor: '#00BEB7',\r\n\t\t\t\t\tbackgroundColor: '#fff',\r\n\t\t\t\t\tbuttonColor: '#00BEB7'\r\n\t\t\t\t}, // 可选配置项样式（悬浮按钮）\r\n\t\t\t\teditModalShow: false, // 是否显示产品分类\r\n\t\t\t\tisEdit: false, // 是否编辑状态\r\n\t\t\t\t// 数据相关参数\r\n\t\t\t\tMchId: organ.getIndustryId(), // 当前组织Id\r\n\t\t\t\tToken: this.global.login.getToken(), // Token值\r\n\t\t\t\tcategory_list: [],\r\n\t\t\t\tcurrentCategoryId: -1, // 当前选中的节点\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad: function(options) {\r\n\t\t\t// =============================== 测试的onLoad 方法 ===========================================\r\n\t\t\t_self = this;\r\n\t\t\tthis.checkList = []\r\n\t\t\tthis.getParams(options);\r\n\t\t\tthis.category_request(); // 获取产品分类信息\r\n\t\t\t\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t//=========================================== 初始化方法 =======================================\r\n\t\t\t/** 初始化参数\r\n\t\t\t * @param {Object} options 初始化参数\r\n\t\t\t */\r\n\t\t\tgetParams: function(options) {\r\n\t\t\t\tthis.preview = options.preview != 'false' ? Boolean(options.preview) : false;\r\n\t\t\t\tif (!_self.MchId) {\r\n\t\t\t\t\tthis.organ_request();\r\n\t\t\t\t} // 请求当前组织Id\r\n\t\t\t\tthis.forceIndex = options.forceIndex ? options.forceIndex : false;\r\n\t\t\t},\r\n\t\t\t// =========================================== 监听方法 =========================================\r\n\t\t\t\r\n\t\t\t/** 添加产品分类\r\n\t\t\t * @param {Object} e\r\n\t\t\t */\r\n\t\t\taddCategory : function(){\r\n\t\t\t\tthis.isEdit = false;\r\n\t\t\t\tthis.reloadcompent(); // 重新加载弹出框\r\n\t\t\t},\r\n\t\t\t/** 编辑产品分类\r\n\t\t\t * @param {Object} e\r\n\t\t\t */\r\n\t\t\teditCategory : function(e){\r\n\t\t\t\tthis.isEdit = true;\r\n\t\t\t\tthis.currentCategoryId = e.currentTarget.dataset.id;\r\n\t\t\t\tthis.reloadcompent(); // 重新加载弹出框\r\n\t\t\t},\r\n\t\t\t/** 删除当前产品分类\r\n\t\t\t * @param {Object} e \r\n\t\t\t */\r\n\t\t\tdeleteCategory : function(e){\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: '删除',\r\n\t\t\t\t\tcontent: '是否删除当前产品分类？',\r\n\t\t\t\t\tsuccess: function(result) {\r\n\t\t\t\t\t\tif (result.confirm) {\r\n\t\t\t\t\t\t\t_self.categoryDelete_request(e.currentTarget.dataset.id);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// ============================================ 公共方法 ==========================================\r\n\t\t\t/**\r\n\t\t\t * 重新渲染邀请新成员控件\r\n\t\t\t */\r\n\t\t\treloadcompent() {\r\n\t\t\t\t_self.editModalShow = false;\r\n\t\t\t\t_self.$nextTick(() => {\r\n\t\t\t\t\t_self.editModalShow = true;\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// =========================================== 数据请求 ===========================================\r\n\t\t\t/**\r\n\t\t\t * 请求获取设备分类\r\n\t\t\t */\r\n\t\t\tcategory_request() {\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle:'数据加载中……'\r\n\t\t\t\t});\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t_self.category_list = changeobj.changetree_array(categories.list,\"CategoryId\" , \"Name\" ,\"Children\");\r\n\t\t\t\t}, 1000);\r\n\t\t\t},\r\n\t\t\t/** 获取当前组织的信息\r\n\t\t\t * @param {Object} organId 组织Id\r\n\t\t\t */\r\n\t\t\torgan_request: function(organId) {\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: _self.website + '/api/SvcMerchant/Info/' + organId,\r\n\t\t\t\t\theader: {\r\n\t\t\t\t\t\tAuthorization: 'Bearer ' + _self.Token\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmethod: 'GET',\r\n\t\t\t\t\tsuccess: function(result) {\r\n\t\t\t\t\t\tif (result.statusCode == 200) {\r\n\t\t\t\t\t\t\tif (result.data.ResultCode == \"0\") {\r\n\t\t\t\t\t\t\t\t// 返回组织Id和名称\r\n\t\t\t\t\t\t\t\tvar data = result.data.Data;\r\n\t\t\t\t\t\t\t\t_self.MchId = data.MchId;\r\n\t\t\t\t\t\t\t\torgan.setIndustryId(data.MchId);\r\n\t\t\t\t\t\t\t\torgan.setName(data.Name);\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: function(errors) {\r\n\t\t\t\t\t\t_self.organName = '';\r\n\t\t\t\t\t\tconsole.log('连接失败', erros);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t/** 删除产品分类\r\n\t\t\t * @param {Object} CategoryId 设备类型\r\n\t\t\t */\r\n\t\t\tcategoryDelete_request: function(CategoryId) {\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '删除请求中……'\r\n\t\t\t\t});\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: _self.website + '/api/SvcCategory/Delete/' + CategoryId,\r\n\t\t\t\t\theader: {\r\n\t\t\t\t\t\tAuthorization: 'Bearer ' + _self.Token\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\tsuccess: function(result) {\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tconsole.log(\"删除产品分类:success=>\", result);\r\n\t\t\t\t\t\tif (result.statusCode == 200) {\r\n\t\t\t\t\t\t\tif (result.data.ResultCode == \"0\") {\r\n\t\t\t\t\t\t\t\t// 返回组织Id和名称\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: '删除成功'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t_self.category_request();\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: result.data.ResultMsg,\r\n\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '服务器连接失败',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: function(erros) {\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tconsole.log(\"删除产品分类……fail:=>\", erros);\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '系统错误',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\t// =============================================================================================\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n</style>"],"sourceRoot":""}