{"version":3,"sources":["uni-app:///main.js","webpack:///D:/MyRepository/EasySmartData/code/AftersveClientApp/pages/basic/staff/staffdetail.vue?d65e","webpack:///D:/MyRepository/EasySmartData/code/AftersveClientApp/pages/basic/staff/staffdetail.vue?5a35","webpack:///D:/MyRepository/EasySmartData/code/AftersveClientApp/pages/basic/staff/staffdetail.vue?6f0f","webpack:///D:/MyRepository/EasySmartData/code/AftersveClientApp/pages/basic/staff/staffdetail.vue?bbf6","uni-app:///pages/basic/staff/staffdetail.vue"],"names":["createPage","Page"],"mappings":"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A,CACA;AACA;AACA;AACA;AACA,SAFA,MAEA;AACA;AACA;AACA,OARA;AASA,WATA,CASA;AACA;AACA;AACA;AACA,sCADA;AAEA,sBAFA;;AAIA,OAhBA;AAiBA,KAtGA;AAuGA;AACA;;;AAGA;AACA;AACA;AACA,qEADA;AAEA;AACA,gDADA,EAFA;;AAKA,qBALA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BADA;AAEA,wBAFA;;AAIA,SAtBA;AAuBA;AACA;AACA;AACA,6BADA;AAEA,wBAFA;;AAIA,SA7BA;;AA+BA,KA5IA;AA6IA;;;AAGA;AACA;AACA,uBADA;;AAGA;AACA,gDADA;AAEA,yBAFA;AAGA,qBAHA;AAIA;AACA,gDADA,EAJA;;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAjBA;AAkBA;AACA;AACA;AACA;AACA,SAtBA;AAuBA;AACA;AACA,SAzBA;;AA2BA,KA/KA;AAgLA;;;AAGA;AACA;AACA,4BADA;AAEA;AACA;AACA;AACA;AACA,4DADA;AAEA;AACA,sDADA,EAFA;;AAKA,4BALA;AAMA,iCANA;AAOA;AACA;AACA;AACA;AACA,gDADA;AAEA,gCAFA;;AAIA;AACA;AACA;AACA;AACA;AACA,oCADA;AAEA,8BAFA;;AAIA;AACA,eAvBA;AAwBA;AACA;AACA;AACA;AACA,mCADA;AAEA,8BAFA;;AAIA,eA/BA;;AAiCA;AACA,SAvCA;;AAyCA;AACA;AA9NA,GAvGA,E","file":"pages/basic/staff/staffdetail.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/basic/staff/staffdetail.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./staffdetail.vue?vue&type=template&id=563e4bf8&\"\nvar renderjs\nimport script from \"./staffdetail.vue?vue&type=script&lang=js&\"\nexport * from \"./staffdetail.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/basic/staff/staffdetail.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./staffdetail.vue?vue&type=template&id=563e4bf8&\"","var components\ntry {\n  components = {\n    uniForms: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-forms/components/uni-forms/uni-forms\" */ \"@/uni_modules/uni-forms/components/uni-forms/uni-forms.vue\"\n      )\n    },\n    uniFormsItem: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-forms/components/uni-forms-item/uni-forms-item\" */ \"@/uni_modules/uni-forms/components/uni-forms-item/uni-forms-item.vue\"\n      )\n    },\n    uniDateformat: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-dateformat/components/uni-dateformat/uni-dateformat\" */ \"@/uni_modules/uni-dateformat/components/uni-dateformat/uni-dateformat.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./staffdetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./staffdetail.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"flex flex-direction\">\r\n\t\t<cu-custom bgColor=\"bg-cyan\" :isBack=\"preview\">\r\n\t\t\t<block slot=\"content\">员工信息</block>\r\n\t\t</cu-custom>\r\n\t\t<uni-forms :rules=\"rules\" :value=\"current\" ref=\"form\" validate-trigger=\"bind\" err-show-type=\"undertext\">\r\n\t\t\t<!-- 头像 -->\r\n\t\t\t<uni-forms-item name=\"Avatar\">\r\n\t\t\t\t<view class=\"bg-white flex solid-bottom padding justify-center\">\r\n\t\t\t\t\t<image class=\"cu-avatar round xl margin-left flex-item\"\r\n\t\t\t\t\t\t:src=\"current.Avatar?current.Avatar:'/static/login/logo_my.png'\" @tap=\"changeAvatar\"></image>\r\n\t\t\t\t</view>\r\n\t\t\t</uni-forms-item>\r\n\t\t\t<!-- 员工编号 -->\r\n\t\t\t<uni-forms-item name=\"StaffNo\">\r\n\t\t\t\t<view class=\"cu-form-group solid-bottom\">\r\n\t\t\t\t\t<view class=\" title text-bold\">员工编号</view>\r\n\t\t\t\t\t<input class=\" text-grey text-left\" :value=\"current.StaffNo\" \r\n\t\t\t\t\t\tdisabled></input>\r\n\t\t\t\t</view>\r\n\t\t\t</uni-forms-item>\r\n\t\t\t<!-- 员工姓名 -->\r\n\t\t\t<uni-forms-item name=\"Name\" required>\r\n\t\t\t\t<view class=\"cu-form-group solid-bottom\">\r\n\t\t\t\t\t<view class=\"title text-bold\">员工姓名</view>\r\n\t\t\t\t\t<input placeholder=\"请输入员工姓名\" :value=\"current.Name\" name=\"Name\"\r\n\t\t\t\t\t\t@input=\"changeName($event);binddata('Name', $event.detail.value,'form');\" />\r\n\t\t\t\t</view>\r\n\t\t\t</uni-forms-item>\r\n\t\t\t<!-- 绑定手机号 -->\r\n\t\t\t<uni-forms-item name=\"Mobile\">\r\n\t\t\t\t<view class=\"cu-form-group solid-bottom\">\r\n\t\t\t\t\t<view class=\"title text-bold\">绑定手机号</view>\r\n\t\t\t\t\t<input placeholder=\"请输入绑定手机号\" type=\"number\" :value=\"current.Mobile\"\r\n\t\t\t\t\t\t@input=\"changeMobile($event);binddata('Mobile' ,$event.detail.value , 'form')\" />\r\n\t\t\t\t</view>\r\n\t\t\t</uni-forms-item>\r\n\t\t\t<!-- 联系电话 -->\r\n\t\t\t<uni-forms-item name=\"Phone\">\r\n\t\t\t\t<view class=\"cu-form-group solid-bottom\">\r\n\t\t\t\t\t<view class=\"title text-bold\">联系电话</view>\r\n\t\t\t\t\t<input placeholder=\"请输入联系电话\" type=\"number\" :value=\"current.Phone\"\r\n\t\t\t\t\t\t@input=\"changePhone($event);binddata('Phone',$event.detail.value , 'form')\" />\r\n\t\t\t\t</view>\r\n\t\t\t</uni-forms-item>\r\n\t\t\t<!-- 邮箱 -->\r\n\t\t\t<uni-forms-item name=\"Email\">\r\n\t\t\t\t<view class=\"cu-form-group solid-bottom\">\r\n\t\t\t\t\t<view class=\"title text-bold\">邮箱</view>\r\n\t\t\t\t\t<input placeholder=\"请输入邮箱号\" :value=\"current.Email\"\r\n\t\t\t\t\t\t@input=\"changeEmail($event);binddata('Email',$event.detail.value , 'form')\" />\r\n\t\t\t\t</view>\r\n\t\t\t</uni-forms-item>\r\n\t\t\t<!-- 是否在职 -->\r\n\t\t\t<uni-forms-item>\r\n\t\t\t\t<view class=\"cu-form-group solid-bottom\">\r\n\t\t\t\t\t<view class=\"title text-bold\">是否在职</view>\r\n\t\t\t\t\t<switch class=\"cyan\"  :checked=\"current.IsJob\" @change=\"changeIsJob\"></switch>\r\n\t\t\t\t</view>\r\n\t\t\t</uni-forms-item>\r\n\t\t\t<!-- 入职日期 -->\r\n\t\t\t<uni-forms-item >\r\n\t\t\t\t<view class=\"cu-form-group solid-bottom\">\r\n\t\t\t\t\t<view class=\"title text-bold\">入职日期</view>\r\n\t\t\t\t\t<picker :value=\"current.EntryAt\" mode=\"date\" start=\"1900-01-01\" end=\"2999-01-01\"\r\n\t\t\t\t\t\t@change=\"changeEntryAt\">\r\n\t\t\t\t\t\t<uni-dateformat format=\"yyyy-MM-dd\" class=\"text-left  padding-tb-sm \" style=\"width: 100%;\"\r\n\t\t\t\t\t\t\t:date=\"current.EntryAt\"></uni-dateformat>\r\n\t\t\t\t\t</picker>\r\n\t\t\t\t</view>\r\n\t\t\t</uni-forms-item>\r\n\t\t\t<!-- 离职时间 -->\r\n\t\t\t<uni-forms-item >\r\n\t\t\t\t<view class=\"cu-form-group solid-bottom\">\r\n\t\t\t\t\t<view class=\"title text-bold\">离职时间</view>\r\n\t\t\t\t\t<picker :value=\"current.QuitAt\" mode=\"date\" start=\"1900-01-01\" end=\"2999-01-01\"\r\n\t\t\t\t\t\t@change=\"changQuitAt\">\r\n\t\t\t\t\t\t<uni-dateformat format=\"yyyy-MM-dd\" class=\"text-left  padding-tb-sm \" style=\"width: 100%;\"\r\n\t\t\t\t\t\t\t:date=\"current.QuitAt\"></uni-dateformat>\r\n\t\t\t\t\t</picker>\r\n\t\t\t\t</view>\r\n\t\t\t</uni-forms-item>\r\n\t\t\t<!-- 状态 -->\r\n\t\t\t<uni-forms-item >\r\n\t\t\t\t<view class=\"cu-form-group solid-bottom\">\r\n\t\t\t\t\t<view class=\"title text-bold\">状态</view>\r\n\t\t\t\t\t<input placeholder=\"请输入状态\" type=\"number\" :value=\"current.Status\"\r\n\t\t\t\t\t\t@input=\"changeStatus\" />\r\n\t\t\t\t</view>\r\n\t\t\t</uni-forms-item>\r\n\t\t\t<!-- 创建时间 -->\r\n\t\t\t<uni-forms-item >\r\n\t\t\t\t<view class=\"cu-form-group solid-bottom\">\r\n\t\t\t\t\t<view class=\"title text-bold\" style=\"width: 200rpx;\">创建时间</view>\r\n\t\t\t\t\t<uni-dateformat class=\"text-left text-grey padding-tb-sm \" style=\"width: 100%;\"\r\n\t\t\t\t\t\t:date=\"current.CreatedAt\" :threshold=\"[60000, 3600000]\"></uni-dateformat>\r\n\t\t\t\t</view>\r\n\t\t\t</uni-forms-item>\r\n\t\t\t<!-- 更新时间 -->\r\n\t\t\t<uni-forms-item >\r\n\t\t\t\t<view class=\"cu-form-group solid-bottom\">\r\n\t\t\t\t\t<view class=\"title text-bold\" style=\"width: 200rpx;\">更新时间</view>\r\n\t\t\t\t\t<uni-dateformat class=\"text-left text-grey padding-tb-sm \" style=\"width: 100%;\"\r\n\t\t\t\t\t\t:date=\"current.UpdatedAt\" :threshold=\"[60000, 3600000]\"></uni-dateformat>\r\n\t\t\t\t</view>\r\n\t\t\t</uni-forms-item>\r\n\t\t</uni-forms>\r\n\t\t<button class=\"cu-btn bg-cyan padding round margin-lr margin-top\" @click=\"save('form')\">保存</button>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\t/** 获取员工信息\r\n\t *  @author 陆彦捷\r\n\t * \t@date 2021.06.24  / 2021.06.29\r\n\t * @date 2021.07.23 重新引用login\r\n\t * @description 查看员工信息详情\r\n\t */\r\n\timport user from '@/common/storage/userstorage.js';\r\n\r\n\tvar _self;\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\t// 样式相关组件\r\n\t\t\t\tpreview: false, // 是否查看上一页\r\n\t\t\t\t// 系统相关参数\r\n\t\t\t\tStaffId: 0, // 员工编号\r\n\t\t\t\tToken: this.global.login.getToken(), // 当前Token\r\n\t\t\t\tcurrent: {\r\n\t\t\t\t\tStaffId : 0 ,\t// 员工号\r\n\t\t\t\t\tAvatar:'',\t\t// 头像\r\n\t\t\t\t\tStaffNo:'',\t\t// 员工编码\r\n\t\t\t\t\tName:'',\t\t// 姓名\r\n\t\t\t\t\tMobile:'',\t\t// 绑定手机号\r\n\t\t\t\t\tPhone:'',\t\t// 手机号\t\r\n\t\t\t\t\tEmail:'',\t\t// 邮箱\r\n\t\t\t\t\tIsJob: true,\t// 是否在职\r\n\t\t\t\t\tEntryAt: null,\t// 入职日期\r\n\t\t\t\t\tQuitAt: null,\t// 离职日期\r\n\t\t\t\t\tStatus: '',\t\t// 状态\r\n\t\t\t\t\tCreatedAt: null,\t// 创建时间\r\n\t\t\t\t\tUpdatedAt: null\t\t// 更新时间\r\n\t\t\t\t},\r\n\t\t\t\tAvatar_init: null, // 初始时头像\r\n\t\t\t\trules: {\r\n\t\t\t\t\tAvatar: {rules: []}, // 头像\r\n\t\t\t\t\tStaffNo: {rules: []}, // 员工编码\r\n\t\t\t\t\tName: {\trules: [{\r\n\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\terrorMessage: '请输入员工姓名'\r\n\t\t\t\t\t\t}]\r\n\t\t\t\t\t}, // 名称\r\n\t\t\t\t\tMobile: {\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\t\terrorMessage: '请输入手机号'\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tpattern: \"^[0-9]{11}$\",\r\n\t\t\t\t\t\t\t\terrorMessage: '手机号为11位数'\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tpattern: \"^1[3|5|6|7|8|9][0-9]{9}$\",\r\n\t\t\t\t\t\t\t\terrorMessage: '请输入正确的手机号码'\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t}, // 绑定手机号\r\n\t\t\t\t\tPhone: {\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\t\terrorMessage: '请输入手机号'\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tpattern: \"^[0-9]{11}$\",\r\n\t\t\t\t\t\t\t\terrorMessage: '手机号为11位数'\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tpattern: \"^1[3|5|6|7|8|9][0-9]{9}$\",\r\n\t\t\t\t\t\t\t\terrorMessage: '请输入正确的手机号码'\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t}, // 联系电话\r\n\t\t\t\t\tEmail: {\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\t\terrorMessage: '请输入邮箱'\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tformat: 'email',\r\n\t\t\t\t\t\t\t\terrorMessage: '请输入正确的邮箱地址'\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t}, // 邮箱\r\n\t\t\t\t\tIsJob: {\r\n\t\t\t\t\t\trulues: []\r\n\t\t\t\t\t}, // 是否在职\r\n\t\t\t\t\tEntryAt: {\r\n\t\t\t\t\t\trulues: []\r\n\t\t\t\t\t}, // 入职时间\r\n\t\t\t\t\tQuitAt: {\r\n\t\t\t\t\t\trulues: []\r\n\t\t\t\t\t}, // 离职时间\r\n\t\t\t\t\tStatus: {\r\n\t\t\t\t\t\trulues: []\r\n\t\t\t\t\t}, // 状态\r\n\t\t\t\t\tCreatedAt: {\r\n\t\t\t\t\t\trulues: []\r\n\t\t\t\t\t}, // 创建时间\r\n\t\t\t\t\tUpdatedAt: {\r\n\t\t\t\t\t\trulues: []\r\n\t\t\t\t\t}, // 更新时间\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\t},\r\n\t\tonReady() {\r\n\t\t\t// 需要在onReady中设置规则\r\n\t\t\tthis.$refs.form.setRules(this.rules);\r\n\t\t},\r\n\t\tonLoad: function(options) {\r\n\t\t\t_self = this;\r\n\t\t\tthis.getParams(options);\r\n\t\t\tthis.staffInfo_request(); // 获取当前用户信息\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// ============================================ 初始化 ==============================================\r\n\t\t\t/** 获取初始化参数\r\n\t\t\t * @param {Object} options\r\n\t\t\t */\r\n\t\t\tgetParams: function(options) {\r\n\t\t\t\tthis.preview = options.preview != 'false' ? Boolean(options.preview) : false;\t// 是否返回上一页\r\n\t\t\t\tthis.StaffId = options.StaffId ? options.StaffId : 0 ;\t\t// 员工Id\r\n\t\t\t},\r\n\t\t\t// ============================================ 监听事件 ==============================================\r\n\t\t\t/** 修改头像\r\n\t\t\t * @param {Object} e\r\n\t\t\t */\r\n\t\t\tchangeAvatar: function(e) {\r\n\t\t\t\t// 显示本地上传的头像\r\n\t\t\t\tuni.chooseImage({\r\n\t\t\t\t\tcount: 1, // 最多可选择图片张数\r\n\t\t\t\t\tsuccess: function(result) {\r\n\t\t\t\t\t\t// 直接修改本地预览\r\n\t\t\t\t\t\tif (result.tempFilePaths.length == 1) {\r\n\t\t\t\t\t\t\t_self.current.Avatar = result.tempFilePaths[0];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: function(erros) {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '选择图片失败！',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t// uni.show\r\n\t\t\t},\r\n\t\t\t/** 修改员工名称\r\n\t\t\t * @param {Object} e\r\n\t\t\t */\r\n\t\t\tchangeName: function(e) {\r\n\t\t\t\tthis.current.Name = e.detail.value;\r\n\t\t\t},\r\n\t\t\t/** 修改绑定手机号\r\n\t\t\t * @param {Object} e\r\n\t\t\t */\r\n\t\t\tchangeMobile: function(e) {\r\n\t\t\t\tthis.current.Mobile = e.detail.value;\r\n\t\t\t},\r\n\t\t\t/** 修改联系电话\r\n\t\t\t * @param {Object} e\r\n\t\t\t */\r\n\t\t\tchangePhone: function(e) {\r\n\t\t\t\tthis.current.phone = e.detail.value;\r\n\t\t\t},\r\n\t\t\t/**修改邮箱地址\r\n\t\t\t * @param {Object} e\r\n\t\t\t */\r\n\t\t\tchangeEmail: function(e) {\r\n\t\t\t\tthis.current.Email = e.detail.value;\r\n\t\t\t},\r\n\t\t\t/**修改是否在职\r\n\t\t\t * @param {Object} e\r\n\t\t\t */\r\n\t\t\tchangeIsJob: function(e) {\r\n\t\t\t\tthis.current.IsJob = e.detail.value;\r\n\t\t\t},\r\n\t\t\t/** 修改入职时间\r\n\t\t\t * @param {Object} e\r\n\t\t\t */\r\n\t\t\tchangeEntryAt: function(e) {\r\n\t\t\t\tthis.current.EntryAt = e.detail.value;\r\n\t\t\t},\r\n\t\t\t/** 修改离职时间\r\n\t\t\t * @param {Object} e\r\n\t\t\t */\r\n\t\t\tchangQuitAt: function(e) {\r\n\t\t\t\tthis.current.QuitAt = e.detail.value;\r\n\t\t\t},\r\n\t\t\t/** 修改状态\r\n\t\t\t * @param {Object} e\r\n\t\t\t */\r\n\t\t\tchangeStatus: function(e) {\r\n\t\t\t\tthis.current.Status = e.detail.value;\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 保存数据（个人信息）\r\n\t\t\t * @param {string} 提交表单名称 \r\n\t\t\t */\r\n\t\t\tsave: function(form) {\r\n\t\t\t\tthis.$refs[form].validate()\r\n\t\t\t\t\t.then((result) => {\r\n\t\t\t\t\t\t// 判断图片是否为初始化图片\r\n\t\t\t\t\t\tif(_self.current.Avatar == _self.Avatar_init){\r\n\t\t\t\t\t\t\t_self.changestaff_request();\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t_self.staffChangLogo_request(_self.current.Avatar);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch((erros) => {\r\n\t\t\t\t\t\tconsole.log(\"验证不通过=>\", erros);\r\n\t\t\t\t\t\t// 显示错误信息\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: erros[0].errorMessage,\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// =============================================== 请求方法 ==================================\r\n\t\t\t/**\r\n\t\t\t * 获取员工信息\r\n\t\t\t */\r\n\t\t\tstaffInfo_request: function() {\r\n\t\t\t\tuni.showLoading();\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: _self.website + '/api/SvcMchStaff/Info/' + _self.StaffId,\r\n\t\t\t\t\theader: {\r\n\t\t\t\t\t\tAuthorization: 'Bearer ' + _self.Token\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmethod: 'GET',\r\n\t\t\t\t\tsuccess: function(result) {\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tif (result.statusCode == 200) {\r\n\t\t\t\t\t\t\tif (result.data.ResultCode == \"0\") {\r\n\t\t\t\t\t\t\t\tvar data = result.data.Data;\r\n\t\t\t\t\t\t\t\tif(data){\r\n\t\t\t\t\t\t\t\t\t_self.current = data;\r\n\t\t\t\t\t\t\t\t\t_self.Avatar_init = data.Avatar;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '没有正确的返回数据',\r\n\t\t\t\t\t\t\ticon:'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: function(erros) {\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '服务器连接失败！',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t/** 上传头像并修改用户信息\r\n\t\t\t * @param {String} avatUrl 本地图片的路径\r\n\t\t\t */\r\n\t\t\tstaffChangLogo_request: function(avatUrl) {\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle:'头像上传中*'\r\n\t\t\t\t})\r\n\t\t\t\tuni.uploadFile({\r\n\t\t\t\t\turl: _self.website + '/api/Share/Upload',\r\n\t\t\t\t\tfilePath: avatUrl,\r\n\t\t\t\t\tname: 'files',\r\n\t\t\t\t\theader: {\r\n\t\t\t\t\t\tAuthorization: 'Bearer ' + _self.Token\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: function(result) {\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tif (result.statusCode == 200) {\r\n\t\t\t\t\t\t\tvar data = JSON.parse(result.data);\r\n\t\t\t\t\t\t\tif (data.ResultCode == \"0\") {\r\n\t\t\t\t\t\t\t\t_self.current.Avatar = data.Data.file_url;\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t_self.current.Avatar = _self.Avatar_init;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: function(errors) {\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tconsole.log(\"调用失败时执行方法=>\", errors);\r\n\t\t\t\t\t\t_self.current.Avatar = _self.Avatar_init;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcomplete: function() {\r\n\t\t\t\t\t\t_self.changestaff_request();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 修改用户信息\r\n\t\t\t */\r\n\t\t\tchangestaff_request: function() {\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: '是否保存用户信息修改？',\r\n\t\t\t\t\tsuccess: function(result) {\r\n\t\t\t\t\t\tif (result.confirm) {\r\n\t\t\t\t\t\t\tuni.showLoading();\r\n\t\t\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\t\t\turl : _self.website + '/api/SvcMchStaff/Update',\r\n\t\t\t\t\t\t\t\theader: {\r\n\t\t\t\t\t\t\t\t\tAuthorization: 'Bearer ' + _self.Token\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\t\t\t\tdata : _self.current,\r\n\t\t\t\t\t\t\t\tsuccess:function(result){\r\n\t\t\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t\t\tif(result.statusCode == 200){\r\n\t\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\t\ttitle:result.data.ResultMsg,\r\n\t\t\t\t\t\t\t\t\t\t\ticon:'none'\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t// 更新员工\r\n\t\t\t\t\t\t\t\t\t\t_self.staffInfo_request();\r\n\t\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\ttitle:'更新员工系信息失败',\r\n\t\t\t\t\t\t\t\t\t\ticon:'none'\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\tconsole.log(\"success:修改员工信息失败=>\",result);\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tfail:function(erros){\r\n\t\t\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t\t\tconsole.log(\"fail:修改员工信息失败=>\",erros);\r\n\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\ttitle:'连接服务器失败！',\r\n\t\t\t\t\t\t\t\t\t\ticon:'none'\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t// =================================================================================================\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\r\n"],"sourceRoot":""}