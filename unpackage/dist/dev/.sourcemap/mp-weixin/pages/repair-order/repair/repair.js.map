{"version":3,"sources":["uni-app:///main.js","webpack:///D:/MyRepository/EasySmartData/code/AftersveClientApp/pages/repair-order/repair/repair.vue?42da","webpack:///D:/MyRepository/EasySmartData/code/AftersveClientApp/pages/repair-order/repair/repair.vue?ad66","webpack:///D:/MyRepository/EasySmartData/code/AftersveClientApp/pages/repair-order/repair/repair.vue?3354","webpack:///D:/MyRepository/EasySmartData/code/AftersveClientApp/pages/repair-order/repair/repair.vue?442c","uni-app:///pages/repair-order/repair/repair.vue"],"names":["createPage","Page"],"mappings":"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ACA;AACA,gBACA,iBACA,kDACA,iCACA,qCACA,CAHA,EAIA,MACA,QACA,MAXA,CAFA,CAeA;AACA,qDACA;AACA,4CACA,sCACA,uCACA,CALA,EAMA,CAtBA,MAsBA,CACA;AACA,2CACA,CAjCA,CAkCA;AACA,qCACA,iBACA,0BACA,MACA,QACA,MALA,CAOA,iCA1CA,CA0CA;AACA,GA/IA,EAgJA,WACA;AACA;;OAGA,wCACA,2EADA,CACA;AACA,8EAFA,CAEA;AACA,6CACA,wBACA,0EACA,WADA,CADA,CAEA;AACA,yCACA,eACA,2DADA,CACA;AACA,wEAFA,CAEA;AACA,oDACA,MACA,iBACA,MACA,QACA,MATA,CAWA,CACA,gCAnBA,CAmBA;AACA,KAzBA,EA0BA;AACA;;OAGA,4CACA,8BACA,4DACA,gCACA,yBACA,2BACA,CALA,MAKA,CACA,4BACA,CACA,0FATA,CASA;AACA,KAxCA,EAyCA;;;UAIA,gDACA,kBACA,oCACA,CAFA,MAEA,CACA,yBACA,CACA,0FANA,CAMA;AACA,KApDA,EAqDA;;;UAIA,0DACA,kBACA,gCACA,oCACA,CAHA,MAGA,CACA,uBACA,CACA,0FAPA,CAOA;AACA,KAjEA,EAkEA;;UAGA,4CACA,uCACA,CAvEA,EAwEA;;mGAGA,kDACA,0CACA,CA7EA,EA8EA;;qMAGA,gDACA,yCACA,CAnFA,EAoFA;;oSAGA,sDACA,kBACA,QADA,EACA;AACA,4CAFA,EAEA;AACA,6BAHA,EAGA;AACA,wCACA,qCACA,kEACA,CAFA,MAEA,CACA,uCACA,CACA,CAVA,IAYA,CApGA,EAqGA;;0MAGA,kCACA,mBACA,uBADA,EAEA,oCAFA,IAIA,CA7GA,EA8GA;;sUAGA,4BACA,2DADA,CACA;AACA,KAnHA,EAoHA;;;;UAKA,iIACA;AACA,wFACA,gBACA,cADA,EAEA,YAFA,IAIA,OACA,CARA,CASA;AACA,kCACA,IADA,CACA,mBACA,uCADA,CAEA;AACA,wBACA,gBADA,EAEA,mCAFA,EAGA,mCACA,qBACA,yDADA,CACA;AACA,aACA,CAPA,IASA,CAbA,EAcA,KAdA,CAcA,mBACA,0BACA,CAhBA,EAiBA,CApJA,EAqJA;AACA;;OAGA,wDACA,kEACA;AACA,kCAFA,CAEA;AACA,sCAHA,CAGA;AACA,OAJA,EAIA,iBACA;AACA,mCAFA,CAEA;AACA;AACA,6BACA,wBACA,gCACA,8BACA,sCADA,CACA;AACA,SACA,OACA,CAfA,EAeA,mBACA;AACA,qCACA,CAlBA,EAkBA,IAlBA,EAmBA,CA7KA,EA8KA;AACA;AACA;AACA,KAjLA;AAkLA;AACA;;;;AAIA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA,KA7LA;AA8LA;;;;;AAKA;AACA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA,KA1MA;AA2MA;;;;;;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAFA;AAGA;AACA;AACA;AACA;AACA;AACA,SAHA;AAIA;AACA;AACA,SANA;AAOA;AACA;AACA;AACA;AACA;AACA,WAHA,MAGA;AACA;AACA;AACA;AACA,SAhBA;AAiBA,OAnBA,MAmBA;AACA;AACA;AACA,OAHA,MAGA;AACA;AACA;AACA;AACA,KApPA;;AAsPA;;;;AAIA,uBA1PA,+BA0PA,OA1PA,EA0PA;AACA;AACA,qBADA;AAEA,mCAFA;AAGA,2BAHA;AAIA,0BAJA;AAKA;AACA;AACA;AACA;AACA;AACA,qBAFA;;AAIA;AACA;AACA;AACA;AACA;AACA,4DADA;;AAGA;AACA;AACA,SArBA;;AAuBA,KAlRA;AAmRA;;;AAGA;AACA;AACA;AACA,uCADA;AAEA,sBAFA;;AAIA;AACA,KA7RA;AA8RA;AACA;;;AAGA;;;AAGA;AACA;AACA,yEADA;AAEA;AACA,gDADA,EAFA;;AAKA,qBALA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAbA;;AAeA,KArTA;AAsTA;;;;AAIA;AACA;AACA;AACA,mGADA;AAEA;AACA,gDADA,EAFA;;AAKA,qBALA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAdA;AAeA;AACA;AACA,SAjBA;;AAmBA,KA/UA;AAgVA;;;AAGA;AACA;AACA;AACA,uEADA;AAEA;AACA,gDADA,EAFA;;AAKA,qBALA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAFA;AAGA;AACA;AACA;AACA;AACA;AACA,SAtBA;AAuBA;AACA;AACA;AACA,SA1BA;;AA4BA,KAjXA;AAkXA;;;AAGA;AACA,iCADA,CACA;AACA,qCAFA,CAEA;AACA;AACA,+DADA;AAEA;AACA,gDADA,EAFA;;AAKA,qBALA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CARA,CAQA;AACA,mDATA,CASA;AACA,6DAVA,CAUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SA5BA;AA6BA;AACA;AACA;AACA,SAhCA;;AAkCA,KA1ZA;AA2ZA;;;;AAIA;AACA;AACA;AACA,qEADA;AAEA;AACA,gDADA,EAFA;;AAKA,qBALA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAFA;AAGA;AACA;AACA;AACA,SAnBA;AAoBA;AACA;AACA;AACA,SAvBA;AAwBA,wCAxBA;;AA0BA,KA3bA;AA4bA;;;;;AAKA;AACA;AACA,4HADA;AAEA;AACA,gDADA,EAFA;;AAKA,qBALA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA,SAZA;;AAcA,KAhdA;AAidA;;;;AAIA;AACA;AACA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA;AACA,wBADA;;AAGA;AACA,gCADA;AAEA;AACA,gDADA,EAFA;;AAKA,sBALA;AAMA,2BANA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCADA;;AAGA,4DATA,CASA;AACA;AACA;AACA;AACA;AACA,8BADA;AAEA,wBAFA;;AAIA,SA5BA;AA6BA;AACA;AACA;AACA;AACA,8BADA;AAEA,wBAFA;;AAIA,SApCA;;AAsCA,KAtgBA;AAugBA;;;;AAIA;AACA;AACA;AACA,wBADA;;AAGA;AACA,gCADA;AAEA;AACA,gDADA,EAFA;;AAKA,sBALA;AAMA,2BANA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aALA,MAKA;AACA;AACA,4CADA;AAEA,4BAFA;;AAIA;AACA;AACA;AACA;AACA,4BADA;AAEA,wBAFA;;AAIA,SA5BA;AA6BA;AACA;AACA;AACA;AACA,8BADA;AAEA,wBAFA;;AAIA,SApCA;;AAsCA;AACA;AAvjBA,GAhJA,E","file":"pages/repair-order/repair/repair.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/repair-order/repair/repair.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./repair.vue?vue&type=template&id=05b78947&\"\nvar renderjs\nimport script from \"./repair.vue?vue&type=script&lang=js&\"\nexport * from \"./repair.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/repair-order/repair/repair.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./repair.vue?vue&type=template&id=05b78947&\"","var components\ntry {\n  components = {\n    isLogin: function() {\n      return import(\n        /* webpackChunkName: \"components/is-login/is-login\" */ \"@/components/is-login/is-login.vue\"\n      )\n    },\n    uniLoadMore: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-load-more/components/uni-load-more/uni-load-more\" */ \"@/uni_modules/uni-load-more/components/uni-load-more/uni-load-more.vue\"\n      )\n    },\n    uniForms: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-forms/components/uni-forms/uni-forms\" */ \"@/uni_modules/uni-forms/components/uni-forms/uni-forms.vue\"\n      )\n    },\n    uniFormsItem: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-forms/components/uni-forms-item/uni-forms-item\" */ \"@/uni_modules/uni-forms/components/uni-forms-item/uni-forms-item.vue\"\n      )\n    },\n    uniDataPicker: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-data-picker/components/uni-data-picker/uni-data-picker\" */ \"@/uni_modules/uni-data-picker/components/uni-data-picker/uni-data-picker.vue\"\n      )\n    },\n    luyjSelectLay: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/luyj-select-lay/components/luyj-select-lay/luyj-select-lay\" */ \"@/uni_modules/luyj-select-lay/components/luyj-select-lay/luyj-select-lay.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./repair.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./repair.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"flex flex-direction bg-white\">\r\n\t\t<!-- 判断是否登录 -->\r\n\t\t<is-login currentPage=\"index\"></is-login>\r\n\t\t<!-- 导航栏 -->\r\n\t\t<cu-custom bgColor=\"bg-cyan\" :isBack=\"preview\">\r\n\t\t\t<block slot=\"content\">{{ current.OrderType == 'SnOrder' ? 'Sn报障' :'分类报障' }}</block>\r\n\t\t</cu-custom>\r\n\t\t<!-- 工单信息加载组件 -->\r\n\t\t<uni-load-more v-if=\"orderLoading\" :status=\"orderStatus\" :contentText=\"orderLoadContentText\"\r\n\t\t\t@clickLoadMore=\"getOrderByOrderId(OrderId)\"></uni-load-more>\r\n\t\t<!-- 设备信息加载组件 -->\r\n\t\t<uni-load-more v-if=\"productLoading\" :status=\"productStatus\" :contentText=\"productLoadContentText\"\r\n\t\t\t@clickLoadMore=\"product_request(ProductSn)\"></uni-load-more>\r\n\t\t<!-- 表单 -->\r\n\t\t<uni-forms ref=\"form\" :value=\"current\" validate-trigger=\"bind\" err-show-type=\"undertext\">\r\n\t\t\t<!-- 标题：设备信息 -->\r\n\t\t\t<view class=\" bg-cyan light text-bold text-xl padding-sm padding-left-xl padding-right\">设备信息</view>\r\n\t\t\t<!-- Cate: 分类 -->\r\n\t\t\t<uni-forms-item v-if=\"current.OrderType === 'CateOrder'\" name=\"CategoryId\">\r\n\t\t\t\t<view class=\"cu-form-group padding-left-xl solid\" name=\"CategoryId\">\r\n\t\t\t\t\t<view class=\"title text-bold\">\r\n\t\t\t\t\t\t<text class=\"text-red\">*</text>\r\n\t\t\t\t\t\t<text>分类</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<uni-data-picker placeholder=\"请选择产品分类\" style=\"width: 85%;\" :value=\"current.CategoryId\"\r\n\t\t\t\t\t\t:preload=\"true\" :localdata=\"category_list\" popup-title=\"产品分类\" @change=\"changeCategory($event)\"\r\n\t\t\t\t\t\t:readonly=\"orderDisabale\">\r\n\t\t\t\t\t</uni-data-picker>\r\n\t\t\t\t</view>\r\n\t\t\t</uni-forms-item>\r\n\t\t\t<!-- Cate: 型号 -->\r\n\t\t\t<uni-forms-item v-if=\"current.OrderType === 'CateOrder'\" name=\"ModelId\">\r\n\t\t\t\t<view class=\"cu-form-group padding-left-xl solid\" name=\"ModelId\">\r\n\t\t\t\t\t<text class=\"title text-bold\">型号</text>\r\n\t\t\t\t\t<luyj-select-lay :loading=\"modelLoading\" :value=\"current.ModelId\" style=\"width: 85%;\" zindex=\"4\" slabel=\"Name\" svalue=\"ModelId\" :options=\"model_list\"\r\n\t\t\t\t\t@selectitem=\"changeModel\" :disabled=\"orderDisabale\"></luyj-select-lay>\r\n\t\t\t\t</view>\r\n\t\t\t</uni-forms-item>\r\n\r\n\t\t\t<!-- SN: 设备SN码 -->\r\n\t\t\t<uni-forms-item v-if=\"current.OrderType === 'SnOrder'\" name=\"ProductSn\">\r\n\t\t\t\t<view class=\"cu-form-group padding-left-xl solid\" name=\"ProductSn\">\r\n\t\t\t\t\t<text class=\"title text-bold\">设备SN码</text>\r\n\t\t\t\t\t<input placeholder=\"请输入设备名称\" :value=\"current.ProductSn\" disabled />\r\n\t\t\t\t</view>\r\n\t\t\t</uni-forms-item>\r\n\t\t\t<!-- SN: 设备名称 -->\r\n\t\t\t<view v-if=\"current.OrderType === 'SnOrder' \" class=\"cu-form-group padding-left-xl solid-bottom\">\r\n\t\t\t\t<text class=\"title text-bold\">设备名称</text>\r\n\t\t\t\t<input placeholder=\"请输入设备名称\" :value=\"product.Name\" disabled />\r\n\t\t\t</view>\r\n\t\t\t<!-- SN: 分类 -->\r\n\t\t\t<view v-if=\"current.OrderType === 'SnOrder' \" class=\"cu-form-group padding-left-xl solid-bottom\">\r\n\t\t\t\t<text class=\"title text-bold\">分类</text>\r\n\t\t\t\t<input placeholder=\"请输入分类\" :value=\"product.CategoryName\" disabled />\r\n\t\t\t</view>\r\n\t\t\t<!-- SN: 型号 -->\r\n\t\t\t<view v-if=\"current.OrderType === 'snOrder' & product.Model\"\r\n\t\t\t\tclass=\"cu-form-group padding-left-xl solid-bottom\">\r\n\t\t\t\t<text class=\"title text-bold\">型号</text>\r\n\t\t\t\t<input placeholder=\"请输入型号\" :value=\"product.Model\" disabled />\r\n\t\t\t</view>\r\n\t\t\t<!-- 所属门店 : 所属门店和地址 (控件后期修改) -->\r\n\t\t\t<uni-forms-item name=\"MchId\">\r\n\t\t\t\t<view class=\"cu-form-group padding-left-xl solid\" name=\"MchId\">\r\n\t\t\t\t\t<text class=\"title text-bold\">所属门店</text>\r\n\t\t\t\t\t<input v-if=\"false\" placeholder=\"输入或选择所属门店\" :value=\"current.MchId\" />\r\n\t\t\t\t\t<luyj-select-lay style=\"width: 77%;\" :loading=\"shopMerchLoading\" zindex=\"3\" placeholder=\"请选择所属门店\" :options=\"shopMerch_list\"\r\n\t\t\t\t\t       :value=\"current.MchId\" slabel=\"label\" svalue=\"MchId\" @selectitem=\"changeShopMearch\" :disabled=\"orderDisabale\">\r\n\t\t\t\t\t </luyj-select-lay>\r\n\t\t\t\t</view>\r\n\t\t\t</uni-forms-item>\r\n\t\t\t<!-- 设备地址 -->\r\n\t\t\t<uni-forms-item name=\"Address\">\r\n\t\t\t\t<view class=\"cu-form-group padding-left-xl solid\" name=\"Address\">\r\n\t\t\t\t\t<text class=\"title text-bold\">设备地址</text>\r\n\t\t\t\t\t<input placeholder=\" \" :value=\"current.Address\" disabled />\r\n\t\t\t\t</view>\r\n\t\t\t</uni-forms-item>\r\n\t\t\t<!-- 标题：服务商 -->\r\n\t\t\t<view class=\" bg-cyan light text-bold text-xl padding-sm padding-left-xl padding-right \">服务商</view>\r\n\t\t\t<!-- 服务商 -->\r\n\t\t\t<uni-forms-item name=\"ServiceMchId\">\r\n\t\t\t\t<view class=\"cu-form-group padding-left-xl solid\" name=\"ServiceMchId\">\r\n\t\t\t\t\t<text class=\"title text-bold\">服务商</text>\r\n\t\t\t\t\t<input placeholder=\" \" :value=\"svcMch.Name\" disabled />\r\n\t\t\t\t</view>\r\n\t\t\t</uni-forms-item>\r\n\t\t\t<!-- 联系电话 -->\r\n\t\t\t<uni-forms-item name=\"ProductSn\">\r\n\t\t\t\t<view class=\"cu-form-group padding-left-xl solid\" name=\"ProductSn\">\r\n\t\t\t\t\t<text class=\"title text-bold\">联系方式</text>\r\n\t\t\t\t\t<input placeholder=\" \"\r\n\t\t\t\t\t\t:value=\"(svcMch.LinkTel?svcMch.LinkTel :'')  +'(' + (svcMch.LinkMan?svcMch.LinkMan:'') + ')'\" \r\n\t\t\t\t\t\tdisabled/>\r\n\t\t\t\t</view>\r\n\t\t\t</uni-forms-item>\r\n\t\t\t<view class=\" bg-cyan light text-xl padding-sm padding-left-xl padding-right cf \">\r\n\t\t\t\t<view class=\"fl text-bold\">\r\n\t\t\t\t\t<text class=\"text-red\">*</text>\r\n\t\t\t\t\t<text>故障描述及服务需求</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<navigator url=\"/pages/basic/product/problem/home?preview=true\"\r\n\t\t\t\t\tclass=\"fr cu-tag text-grey text-df bg-white padding-sm solid\">\r\n\t\t\t\t\t<text class=\"margin-right-xs\">常见故障</text> <text>>></text>\r\n\t\t\t\t</navigator>\r\n\t\t\t</view>\r\n\t\t\t<!-- 故障描述及服务需求 -->\r\n\t\t\t<uni-forms-item name=\"OrderMsg\">\r\n\t\t\t\t<view class=\"cu-form-group padding-left-xl solid\" name=\"OrderMsg\">\r\n\t\t\t\t\t<textarea v-if=\"!orderDisabale\" placeholder=\"请说明设备的故障描述及服务需求\" maxlength=\"-1\" :value=\"current.OrderMsg\"\r\n\t\t\t\t\t\t@input=\"changeOrderMsg($event);binddata('OrderMsg',$event.detail.value,'form')\" \r\n\t\t\t\t\t\t ></textarea>\r\n\t\t\t\t\t<view v-else class=\"text-sm\">\r\n\t\t\t\t\t\t{{ current.OrderMsg }}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</uni-forms-item>\r\n\t\t\t<!-- 标题：相关图片 -->\r\n\t\t\t<view class=\" cu-bar bg-cyan light padding-sm \">\r\n\t\t\t\t<view class=\"action text-bold text-xl\">\r\n\t\t\t\t\t相关图片\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"action\">\r\n\t\t\t\t\t{{current.Imgs.length}}/9\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<uni-form-item name=\"Imgs\">\r\n\t\t\t\t<view class=\"cu-form-group margin-top padding-top padding-left-xl solid\">\r\n\t\t\t\t\t<view class=\"grid col-4 grid-square flex-sub\">\r\n\t\t\t\t\t\t<view class=\"bg-img\" v-for=\"(item,index) in current.Imgs\" :key=\"index\" @tap=\"ViewImage\"\r\n\t\t\t\t\t\t\t:data-url=\"current.Imgs[index]\">\r\n\t\t\t\t\t\t\t<image :src=\"current.Imgs[index]\" mode=\"aspectFill\"></image>\r\n\t\t\t\t\t\t\t<view v-if=\"!orderDisabale\" class=\"cu-tag bg-red\" @tap.stop=\"DelImg\" :data-index=\"index\">\r\n\t\t\t\t\t\t\t\t<text class='cuIcon-close'></text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<!-- 添加图片按钮 -->\r\n\t\t\t\t\t\t<view v-if=\"!orderDisabale && current.Imgs.length<9\" class=\"solids\" @tap=\"ChooseImage\">\r\n\t\t\t\t\t\t\t<text class='cuIcon-cameraadd'></text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</uni-form-item>\r\n\r\n\t\t\t<!-- 报修人 根据实际 -->\r\n\t\t\t<view class=\" bg-cyan light text-bold text-xl padding-sm padding-left-xl padding-right \">报障人\r\n\t\t\t</view>\r\n\t\t\t<!-- 报障人姓名 -->\r\n\t\t\t<uni-forms-item name=\"AddUserName\">\r\n\t\t\t\t<view class=\"cu-form-group padding-left-xl solid\" name=\"addUserName\">\r\n\t\t\t\t\t<view class=\"title text-bold\">\r\n\t\t\t\t\t\t<text class=\"text-red margin-right\">*</text>\r\n\t\t\t\t\t\t<text>姓名</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<input placeholder=\"请输入姓名\" :value=\"current.AddUserName\"\r\n\t\t\t\t\t\t@input=\"changeAddUserName($event);binddata('AddUserName',$event.detail.value,'form')\" :disabled=\"orderDisabale\" />\r\n\t\t\t\t</view>\r\n\t\t\t</uni-forms-item>\r\n\t\t\t<!-- 联系电话 -->\r\n\t\t\t<uni-forms-item  name=\"AddUserTel\">\r\n\t\t\t\t<view class=\"cu-form-group padding-left-xl solid\" name=\"addUserTel\">\r\n\t\t\t\t\t<view class=\"title text-bold\">\r\n\t\t\t\t\t\t<text class=\"text-red margin-right\">*</text>\r\n\t\t\t\t\t\t<text>联系电话</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<input placeholder=\"请输入联系电话\" :value=\"current.AddUserTel\"\r\n\t\t\t\t\t\t@input=\"changeAddUserTel($event);binddata('AddUserTel' ,$event.detail.value , 'form')\" \r\n\t\t\t\t\t\t :disabled=\"orderDisabale\"/>\r\n\t\t\t\t</view>\r\n\t\t\t</uni-forms-item>\r\n\t\t</uni-forms>\r\n\t\t<!-- 保存和提交按钮 -->\r\n\t\t<view v-if=\"!orderDisabale\" class=\"grid col-2 \">\r\n\t\t\t<view class=\"flex flex-direction padding\">\r\n\t\t\t\t<button class=\"padding bg-grey content cu-btn round\" @click=\"submit('form', false , isEdit)\">保存</button>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"flex flex-direction padding\">\r\n\t\t\t\t<button class=\"padding bg-cyan content cu-btn round\" @click=\"submit('form' , true , isEdit)\">提交</button>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\t/**\r\n\t * SN设备报障\r\n\t * @author 陆彦捷\r\n\t * @date 2021.07.07 初始化页面的简单设计\r\n\t * @date 2021.07.12 SN码样式修改\r\n\t * @date 2021.07.16  添加报修人员信息\r\n\t * @date 2021.07.20 添加接口和细节、移除报修人员信息\r\n\t * @date 2021.07.21 分类报障\r\n\t * @date 2021.07.22 将order_request放到单独的请求文件 , 令工单不可编辑\r\n\t * @date 2021.07.23 重新引入login\r\n\t * \t添加不可编辑状态\r\n\t * @description  SN 设备报障工单 、 合并分类报障\r\n\t * \t注： 所属门店控件需要改进\r\n\t * \t\t需要考虑申请设备转移\r\n\t * \t\t需要判断当前设备的状态\r\n\t * \t\t报修人信息需要考虑的是当前员工信息，而不是userId\r\n\t */\r\n\timport organ from '@/common/storage/organstorage.js'; // 组织\r\n\timport repairOrderRequest from '@/common/request/repairorder.js';\t// 报障和工单的请求\r\n\timport changeobj from '@/common/function/changeobjectecordname.js'; // 格式化数组/对象\r\n\timport publicfunc from '@/common/function/publicfunc.js'; // 公共方法\r\n\r\n\tvar _self;\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\toptions : {},\t\t\t// 用于保存获取的参数\r\n\t\t\t\torderDisabale : false,\t// 工单是否不可编辑\r\n\t\t\t\t// ================================== 临时方法 =============================================\r\n\t\t\t\t// 与样式有关参数\r\n\t\t\t\tpreview: true, // 是否返回上一页\r\n\t\t\t\tisEdit: false, // 是否编辑状态（SN码不可修改）（相对于创建）\r\n\t\t\t\tcanEdit : false,\t// 报障工单是否可编辑\r\n\t\t\t\tproductLoading: false, // 获取设备信息\r\n\t\t\t\tproductLoadContentText: {\r\n\t\t\t\t\tcontentdown: \"点击刷新设备信息\",\r\n\t\t\t\t\tcontentrefresh: \"设备信息加载中...\",\r\n\t\t\t\t\tcontentnomore: \"没有更多数据了\"\r\n\t\t\t\t}, // 显示加载数据\r\n\t\t\t\tproductStatus: 'more', // 加载状态\r\n\r\n\t\t\t\torderLoading: false, // 获取设备信息\r\n\t\t\t\torderLoadContentText: {\r\n\t\t\t\t\tcontentdown: \"点击刷新工单信息\",\r\n\t\t\t\t\tcontentrefresh: \"工单信息加载中...\",\r\n\t\t\t\t\tcontentnomore: \"没有更多数据了\"\r\n\t\t\t\t}, // 显示加载数据\r\n\t\t\t\torderStatus: 'more', // 加载状态\r\n\t\t\t\t\r\n\t\t\t\t// 与系统有关参数\r\n\t\t\t\tMchId: organ.getIndustryId(), // 组织Id\r\n\t\t\t\tUserId: this.login.getUserId(), // 当前用户id\r\n\t\t\t\tToken: this.login.getToken(), // Token值\r\n\t\t\t\t\r\n\t\t\t\tOrderId: 0, // 工单Id =0\r\n\t\t\t\t\r\n\t\t\t\tcategory_list: [], // 产品分类\r\n\t\t\t\tmodelLoading : false,\t// 型号加载中\r\n\t\t\t\tmodel_list: [], // 型号\r\n\t\t\t\tProductId: 0, // 设备ID\r\n\t\t\t\tProductSn: '', // 设备SN\r\n\t\t\t\tproduct: {}, // 获取的设备信息\r\n\t\t\t\tshopMerchLoading : false ,\t// 门店加载中\r\n\t\t\t\tshopMerch_list : [],\t\t// 门第列表信息\r\n\t\t\t\tsvcMch :{},\t // 服务商信息\r\n\t\t\t\tImgList: [], // 用于比对图片是否上传\r\n\t\t\t\t\r\n\t\t\t\t// 表单信息\r\n\t\t\t\tcurrent: {\r\n\t\t\t\t\tOrderId: 0, // 工单Id\r\n\t\t\t\t\tProductSn: \"\", // SN码\r\n\t\t\t\t\tOrderType: \"\", // 工单类型   SnOrder ：按SN报障 ，  CateOrder  ： 按分类报障\r\n\t\t\t\t\tMchId: 0, // 所属门店\r\n\t\t\t\t\tAddress: \"\", // 设备地址\r\n\t\t\t\t\tServiceMchId: 0, // 服务商id\r\n\t\t\t\t\tCategoryId: 0, // 分类id\r\n\t\t\t\t\tModelId: 0, // modelId\r\n\t\t\t\t\t// 个人信息(暂时不展示)(服务商查看时展示)\r\n\t\t\t\t\tAddUser: 0,\t// 添加人报障人\r\n\t\t\t\t\tAddUserName: \"\",\t\t// 添加人姓名\r\n\t\t\t\t\tAddUserTel: \"\", // 添加人联系电话\r\n\t\t\t\t\tOrderMsg: \"\", // 故障描述\r\n\t\t\t\t\tImgs: [], // 图片\r\n\t\t\t\t\tIsTransfer: false, // 是否对工单进行转移\r\n\t\t\t\t}, // 当前值\r\n\t\t\t\t\r\n\t\t\t\trules: {\r\n\t\t\t\t\tOrderMsg: {\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\terrorMessage: '请输入故障描述及服务需求'\r\n\t\t\t\t\t\t}]\r\n\t\t\t\t\t},\r\n\t\t\t\t\t// 报修人姓名\r\n\t\t\t\t\tAddUserName: {\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\terrorMessage: '请输入姓名'\r\n\t\t\t\t\t\t}]\r\n\t\t\t\t\t},\r\n\t\t\t\t\t// 报修人联系方式\r\n\t\t\t\t\tAddUserTel: {\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\t\terrorMessage: '请输入手机号'\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tpattern: \"^[0-9]{11}$\",\r\n\t\t\t\t\t\t\t\terrorMessage: '手机号为11位数'\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tpattern: \"^1[3|5|6|7|8|9][0-9]{9}$\",\r\n\t\t\t\t\t\t\t\terrorMessage: '请输入正确的手机号码'\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t},\r\n\t\t\t\t}, // 验证\r\n\t\t\t}\r\n\t\t},\r\n\t\tonReady: function() {\r\n\t\t\t// 初始化表单验证\r\n\t\t\tthis.$refs.form.setRules(this.rules);\r\n\t\t},\r\n\t\tonLoad: function(options) {\r\n\t\t\t// ===================== 临时方法 ===\r\n\t\t\tthis.options = options;\r\n\t\t\tthis.orderDisabale = this.OrderDisable();\t\t// 判断工单是否不可编辑\r\n\t\t\tconsole.log(\"disable=>\" , this.orderDisabale);\r\n\t\t\t// ======================\r\n\t\t\t_self = this;\r\n\t\t\tthis.getParams(options); // 初始化加载参数\r\n\t\t\tif (!this.isEdit) {\r\n\t\t\t\t// 初次进行设备报障\r\n\t\t\t\tswitch (this.current.OrderType) {\r\n\t\t\t\t\tcase 'SnOrder':\r\n\t\t\t\t\t\tthis.product_request(this.ProductSn); // 获取设备信息\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'CateOrder':\r\n\t\t\t\t\t\tglobal.mearchR.getCurrentShopMch(function(item){\r\n\t\t\t\t\t\t\t_self.current.MchId = item.MchId;\r\n\t\t\t\t\t\t\t_self.current.Address = item.Address;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\t// 获取员工信息（报障人）\r\n\t\t\t\tglobal.staffR.getCurrentStaff(function(item){\r\n\t\t\t\t\t// 加载报修人的基本信息\r\n\t\t\t\t\t_self.current.AddUser = item.UserId;\r\n\t\t\t\t\t_self.current.AddUserName = item.Name;\r\n\t\t\t\t\t_self.current.AddUserTel = item.Mobile;\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\t// 获取表单信息\r\n\t\t\t\tthis.getOrderByOrderId(this.OrderId);\r\n\t\t\t}\r\n\t\t\t//  获取公共的list值\r\n\t\t\tswitch (this.current.OrderType) {\r\n\t\t\t\tcase 'CateOrder':\r\n\t\t\t\t\tthis.categories_request();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tthis.fullOrg_request(this.MchId);\t\t// 查询分店信息\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// ============================================ 初始化方法 ================================================================\r\n\t\t\t/** 获取初始化参数\r\n\t\t\t * @param {Object} options \r\n\t\t\t */\r\n\t\t\tgetParams: function(options) {\r\n\t\t\t\tthis.preview = options.preview != false ? Boolean(options.preview) : false; // 是否返回上一页\r\n\t\t\t\tthis.OrderId = Boolean(options.OrderId) ? parseInt(options.OrderId) : 0; // 获取OrderId\r\n\t\t\t\tconsole.log(\"OrderId=>\" , this.OrderId);\r\n\t\t\t\tif (this.OrderId == 0) {\r\n\t\t\t\t\tthis.current.OrderType = Boolean(options.OrderType) ? options.OrderType :\r\n\t\t\t\t\t'CateOrder'; // 报障方式 SnOrder 、CateOrder\r\n\t\t\t\t\tswitch (this.current.OrderType) {\r\n\t\t\t\t\t\tcase 'SnOrder':\r\n\t\t\t\t\t\t\tthis.ProductId = options.ProductId ? options.ProductId : 0; // 设备Id\r\n\t\t\t\t\t\t\tthis.ProductSn = options.ProductSn ? options.ProductSn : ''; // 获取设备SN\r\n\t\t\t\t\t\t\tthis.current.ProductSn = this.ProductSn;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'CateOrder':\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.isEdit = this.OrderId != 0; // 是否处于编辑状态\r\n\t\t\t},\r\n\t\t\t// ============================================ 监听事件 ==================================================================\r\n\t\t\t/** 修改产品分类\r\n\t\t\t * @param {Object} e\r\n\t\t\t */\r\n\t\t\tchangeCategory: function(e ) {\r\n\t\t\t\tif(Boolean(e.detail.value)){\r\n\t\t\t\t\tvar value = e.detail.value[e.detail.value.length -1 ] .value;\r\n\t\t\t\t\tthis.current.CategoryId = value;\r\n\t\t\t\t\tthis.current.ModelId = 0;\r\n\t\t\t\t\tthis.models_request(value);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.current.CategoryId = 0;\r\n\t\t\t\t}\r\n\t\t\t\tthis.serverMch_request(this.current.MchId , this.current.CategoryId , this.current.ModelId);\t// 获取服务商信息\r\n\t\t\t},\r\n\t\t\t/** 修改型号\r\n\t\t\t * @param {Object} index 索引\r\n\t\t\t * @param {Object} item 对应的item值\r\n\t\t\t */\r\n\t\t\tchangeModel: function(index,item) {\r\n\t\t\t\tif(index != -1){\r\n\t\t\t\t\tthis.current.ModelId = item.ModelId;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.current.ModelId = 0;\r\n\t\t\t\t}\r\n\t\t\t\tthis.serverMch_request(this.current.MchId , this.current.CategoryId , this.current.ModelId);\t// 获取服务商信息\r\n\t\t\t},\r\n\t\t\t/** 修改所属门店\r\n\t\t\t * @param {Object} index 索引\r\n\t\t\t * @param {Object} item 对应该能的index值\r\n\t\t\t */\r\n\t\t\tchangeShopMearch : function(index , item){\r\n\t\t\t\tif(index != -1){\r\n\t\t\t\t\tthis.current.MchId = item.MchId;\r\n\t\t\t\t\tthis.current.Address = item.Address;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.current.MchId = 0;\r\n\t\t\t\t}\r\n\t\t\t\tthis.serverMch_request(this.current.MchId , this.current.CategoryId , this.current.ModelId);\t// 获取服务商新\r\n\t\t\t},\r\n\t\t\t/** 修改故障描述\r\n\t\t\t * @param {Object} e\r\n\t\t\t */\r\n\t\t\tchangeOrderMsg: function(e) {\r\n\t\t\t\tthis.current.OrderMsg = e.detail.value;\r\n\t\t\t},\r\n\t\t\t/** 修改报修人姓名\r\n\t\t\t * @param {Object} e\r\n\t\t\t */\r\n\t\t\tchangeAddUserName : function(e){\r\n\t\t\t\tthis.current.AddUserName = e.detail.value;\r\n\t\t\t},\r\n\t\t\t/** 修改报修人联系电话\r\n\t\t\t * @param {Object} e\r\n\t\t\t */\r\n\t\t\tchangeAddUserTel : function(e){\r\n\t\t\t\tthis.current.AddUserTel = e.detail.value;\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 选择图片\r\n\t\t\t */\r\n\t\t\tChooseImage: function() {\r\n\t\t\t\tuni.chooseImage({\r\n\t\t\t\t\tcount: 9, //默认9\r\n\t\t\t\t\tsizeType: ['original', 'compressed'], //可以指定是原图还是压缩图，默认二者都有\r\n\t\t\t\t\tsourceType: ['album'], //从相册选择\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tif (this.current.Imgs.length != 0) {\r\n\t\t\t\t\t\t\tthis.current.Imgs = this.current.Imgs.concat(res.tempFilePaths)\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.current.Imgs = res.tempFilePaths\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t/** 查看图片\r\n\t\t\t * @param {Object} e\r\n\t\t\t */\r\n\t\t\tViewImage: function(e) {\r\n\t\t\t\tuni.previewImage({\r\n\t\t\t\t\turls: this.current.Imgs,\r\n\t\t\t\t\tcurrent: e.currentTarget.dataset.url\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t/** 删除图片\r\n\t\t\t * @param {Object} e\r\n\t\t\t */\r\n\t\t\tDelImg: function(e) {\r\n\t\t\t\tthis.current.Imgs.splice(e.currentTarget.dataset.index, 1); // 删除当前图片\r\n\t\t\t},\r\n\t\t\t/** 保存或提交工单\r\n\t\t\t * @param {String} form 表单名称\r\n\t\t\t * @param {Boolean} isSubmit 是否提交 \r\n\t\t\t * @param {Boolean} isEdit 工单是否处于编辑状态\r\n\t\t\t */\r\n\t\t\tsubmit: function(form, isSubmit, isEdit = false) {\r\n\t\t\t\t// 验证产品分类\r\n\t\t\t\tif(this.current.OrderType === \"CateOrder\" && !Boolean(this.current.CategoryId)){\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle:'请输入分类',\r\n\t\t\t\t\t\ticon:'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t// 验证\r\n\t\t\t\tthis.$refs[form].validate()\r\n\t\t\t\t\t.then((result) => {\r\n\t\t\t\t\t\tvar titleTemp = isSubmit ? '提交' : '保存';\r\n\t\t\t\t\t\t// 提交或保存当前工单\r\n\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\ttitle: titleTemp,\r\n\t\t\t\t\t\t\tcontent: '是否' + titleTemp + '当前工单？',\r\n\t\t\t\t\t\t\tsuccess: function(result) {\r\n\t\t\t\t\t\t\t\tif (result.confirm) {\r\n\t\t\t\t\t\t\t\t\t_self.submitSwitch(_self.current.Imgs, isSubmit, isEdit); // 提交后续操作\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch((errors) => {\r\n\t\t\t\t\t\t_self.messageShow(errors);\r\n\t\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// ======================================== 公共方法 =========================================================\r\n\t\t\t/** 根据工单id 获取当前工单信息\r\n\t\t\t * @param {Number} OrderId\r\n\t\t\t */\r\n\t\t\tgetOrderByOrderId : function(OrderId){\r\n\t\t\t\trepairOrderRequest.orderByOrderId_request(OrderId , function(){\r\n\t\t\t\t\t// 请求前操作\r\n\t\t\t\t\t_self.orderLoading = true; // 工单信息加载中\r\n\t\t\t\t\t_self.orderStatus = \"loading\"; // 工单信息加载状态\r\n\t\t\t\t},function(data){\r\n\t\t\t\t\t// 请求成功执行操作\r\n\t\t\t\t\t_self.orderLoading = false;// 设备信息加载完成\r\n\t\t\t\t\t// 获取数据\r\n\t\t\t\t\t_self.current = data;\r\n\t\t\t\t\t_self.current.Imgs = [];\r\n\t\t\t\t\t_self.orderImg_request(OrderId);\r\n\t\t\t\t\tif (Boolean(data.ProductSn)) {\r\n\t\t\t\t\t\t_self.product_request(data.ProductSn); // 获取设备信息\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn;\r\n\t\t\t\t},function(errors){\r\n\t\t\t\t\t// 请求失败执行操作\r\n\t\t\t\t\t_self.orderStatus = \"noMore\";\r\n\t\t\t\t} , null);\r\n\t\t\t},\r\n\t\t\t// 判断工单是否不可编辑\r\n\t\t\tOrderDisable : function(){\r\n\t\t\t\treturn this.options.Disable != 'false' ? Boolean(this.options.Disable) : false;\r\n\t\t\t},\r\n\t\t\t// ======================================= 公共方法-提交 ======================================================\r\n\t\t\t/** 提交后续操作（保存/提交工单）(不包括验证及图片)\r\n\t\t\t * @param {Boolean} isSubmit\t是否提交\r\n\t\t\t * @param {Boolean} isEdit\t是否处于编辑状态\r\n\t\t\t */\r\n\t\t\tsubmitSwitchNoImgs: function(isSubmit, isEdit) {\r\n\t\t\t\tif (isSubmit) {\r\n\t\t\t\t\tthis.submit_request(isEdit);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.saveRepair_request(isEdit);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t/** 提交后续操作（是否上传图片、保存/提交工单）\r\n\t\t\t * @param {Arra} Imgs 需要上传的图片数组\r\n\t\t\t * @param {Object} isSubmit\t是否提交\r\n\t\t\t * @param {Object} isEdit\t是否处于编辑状态\r\n\t\t\t */\r\n\t\t\tsubmitSwitch: function(Imgs, isSubmit, isEdit) {\r\n\t\t\t\tImgs = Boolean(Imgs) ? Imgs : [];\r\n\t\t\t\tif (Imgs.length > 0) {\r\n\t\t\t\t\tthis.orderImgUpload(Imgs, 0, isSubmit, isEdit);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.submitSwitchNoImgs(isSubmit, isEdit);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t/** 相关图片上传(递归调用)\r\n\t\t\t * @param {Array} Imgs\t 图片地址\r\n\t\t\t * @param {Number} index 当前图片索引\r\n\t\t\t * @param {Boolean} isSubmit 工单是否提交（保存/提交）\r\n\t\t\t * @param {Boolean} isEdit  是否编辑状态\r\n\t\t\t */\r\n\t\t\torderImgUpload: function(Imgs, index, isSubmit, isEdit) {\r\n\t\t\t\t// 跳转到保存或提交页面\r\n\t\t\t\tif (index === Imgs.length) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t// 递归提交上传图片\r\n\t\t\t\tvar img = this.ImgList.filter(imgI => {\r\n\t\t\t\t\treturn Imgs[index] === imgI.Path;\r\n\t\t\t\t});\r\n\t\t\t\tif (img.length === 0) {\r\n\t\t\t\t\t// 图片未保存\r\n\t\t\t\t\tthis.global.imgR.imgUpload(Imgs[index], \"上传第\" + (index + 1) + \"张图片中……\", function(imgUrl) {\r\n\t\t\t\t\t\t\t// 调用成功后执行方法\r\n\t\t\t\t\t\t\t_self.current.Imgs[index] = imgUrl;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfunction(errors) {\r\n\t\t\t\t\t\t\t// 调用失败后执行方法\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfunction() {\r\n\t\t\t\t\t\t\t// 接口调用后执行方法\r\n\t\t\t\t\t\t\tif (index === Imgs.length - 1) {\r\n\t\t\t\t\t\t\t\t// 最后一张图片上传完成（保存或提交）\r\n\t\t\t\t\t\t\t\t_self.submitSwitchNoImgs(isSubmit, isEdit);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t// 下一张图片上传\r\n\t\t\t\t\t\t\t\t_self.orderImgUpload(Imgs, index + 1, isSubmit, isEdit);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t} else if (index === Imgs.length - 1) {\r\n\t\t\t\t\t// 已存在，且为最后一张图片- 保存或提交\r\n\t\t\t\t\t_self.submitSwitchNoImgs(isSubmit, isEdit);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// 已存在 - 下一张图片上传\r\n\t\t\t\t\tthis.orderImgUpload(Imgs, index + 1, isSubmit, isEdit);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t *  工单提交成功后执行操作\r\n\t\t\t *  @param {Number} OrderId 工单的OrderId\r\n\t\t\t */\r\n\t\t\tsubmitOrder_success(OrderId) {\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: '提交成功',\r\n\t\t\t\t\tcontent: '工单提交成功！是否查看工单进度？',\r\n\t\t\t\t\tconfirmText: '工单跟踪',\r\n\t\t\t\t\tcancelText: '工单列表',\r\n\t\t\t\t\tsuccess: function(result) {\r\n\t\t\t\t\t\t// 工单进度页\r\n\t\t\t\t\t\tif (result.confirm) {\r\n\t\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\t\turl: '/pages/repair-order/repair-order/customer/detail?preview=true&type=sn&step=0&OrderId=' +\r\n\t\t\t\t\t\t\t\t\tOrderId\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// 工单列表页\r\n\t\t\t\t\t\tif (result.cancel) {\r\n\t\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\t\turl: '/pages/index/index?PageCur=repair_order'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t/** 展示错误提示信息\r\n\t\t\t * @param {Object} errors 错误提示信息\r\n\t\t\t */\r\n\t\t\tmessageShow: function(errors) {\r\n\t\t\t\tif (errors.length > 0) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: errors[0].errorMessage,\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// ================================================= 请求事件 ==========================================================\r\n\t\t\t/** 获取当前工单对应的图片\r\n\t\t\t * @param {Object} OrderId 工单Id\r\n\t\t\t */\r\n\t\t\t/**\r\n\t\t\t * 产品分类请求\r\n\t\t\t */\r\n\t\t\tcategories_request: function() {\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: _self.website + '/api/SvcCategory/Tree?mchId=' + _self.MchId,\r\n\t\t\t\t\theader: {\r\n\t\t\t\t\t\tAuthorization: 'Bearer ' + _self.Token\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmethod: 'GET',\r\n\t\t\t\t\tsuccess:function(result){\r\n\t\t\t\t\t\tif(result.statusCode === 200){\r\n\t\t\t\t\t\t\tif(result.data.ResultCode === \"0\"){\r\n\t\t\t\t\t\t\t\t_self.category_list = changeobj.change(result.data.Data, \"CategoryId\", \"Name\", \"Children\");\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 产品型号列表请求\r\n\t\t\t * @param {int} 产品分类 \r\n\t\t\t */\r\n\t\t\tmodels_request: function(CategoryId) {\r\n\t\t\t\tthis.modelLoading = true;\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: _self.website + '/api/SvcModel/Get?mchId=' + _self.MchId + '&categoryId=' + CategoryId,\r\n\t\t\t\t\theader: {\r\n\t\t\t\t\t\tAuthorization: 'Bearer ' + _self.Token\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmethod: 'GET',\r\n\t\t\t\t\tsuccess:function(result){\r\n\t\t\t\t\t\t_self.modelLoading = false;\r\n\t\t\t\t\t\tif(result.statusCode === 200){\r\n\t\t\t\t\t\t\tif(result.data.ResultCode === \"0\"){\r\n\t\t\t\t\t\t\t\t_self.model_list = result.data.Data;\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail:function(errors){\r\n\t\t\t\t\t\t_self.modelLoading = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t/** 获取工单对应的图片列表\r\n\t\t\t * @param {Object} OrderId 工单Id\r\n\t\t\t */\r\n\t\t\torderImg_request: function(OrderId) {\r\n\t\t\t\t_self.current.Imgs = [];\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: _self.website + '/api/SvcOrderImg/List?orderId=' + OrderId,\r\n\t\t\t\t\theader: {\r\n\t\t\t\t\t\tAuthorization: 'Bearer ' + _self.Token\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmethod: 'GET',\r\n\t\t\t\t\tsuccess: function(result) {\r\n\t\t\t\t\t\tconsole.log(\"获取当前工单图片success=>\", result);\r\n\t\t\t\t\t\tif (result.statusCode === 200) {\r\n\t\t\t\t\t\t\tif (result.data.ResultCode === \"0\") {\r\n\t\t\t\t\t\t\t\t_self.orderStatus = \"noMore\";\r\n\t\t\t\t\t\t\t\tvar data = result.data.Data;\r\n\t\t\t\t\t\t\t\t_self.ImgList = data;\r\n\t\t\t\t\t\t\t\tif (data.length > 0) {\r\n\t\t\t\t\t\t\t\t\tdata.forEach(item => {\r\n\t\t\t\t\t\t\t\t\t\t_self.current.Imgs.push(item.Path);\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t_self.orderStatus = \"more\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: function(errors) {\r\n\t\t\t\t\t\tconsole.log(\"获取工单图片fail=>\", errors);\r\n\t\t\t\t\t\t_self.orderStatus = \"more\";\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t/** 根据SN获取设备信息\r\n\t\t\t * @param {Object} sn\r\n\t\t\t */\r\n\t\t\tproduct_request: function(sn) {\r\n\t\t\t\tthis.productLoading = true; // 设备信息加载中\r\n\t\t\t\tthis.productStatus = \"loading\"; // 设备状态为加载中\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: _self.website + '/api/SvcProduct/Product?sn=' + sn,\r\n\t\t\t\t\theader: {\r\n\t\t\t\t\t\tAuthorization: 'Bearer ' + _self.Token\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmethod: 'GET',\r\n\t\t\t\t\tsuccess: function(result) {\r\n\t\t\t\t\t\tconsole.log(\"获取设备success=>\", result);\r\n\t\t\t\t\t\tif (result.statusCode === 200) {\r\n\t\t\t\t\t\t\tif (result.data.ResultCode === \"0\") {\r\n\t\t\t\t\t\t\t\t// 设备信息加载完成\r\n\t\t\t\t\t\t\t\t_self.productLoading = false;\r\n\t\t\t\t\t\t\t\t_self.productStatus = \"noMore\";\r\n\t\t\t\t\t\t\t\t// 获取数据\r\n\t\t\t\t\t\t\t\tvar data = result.data.Data;\r\n\t\t\t\t\t\t\t\t_self.product = data;\r\n\t\t\t\t\t\t\t\t// 当前门店\r\n\t\t\t\t\t\t\t\t_self.current.MchId = data.MchId; // 当前门店\r\n\t\t\t\t\t\t\t\t_self.current.Address = data.Address; // 门店地址\r\n\t\t\t\t\t\t\t\t_self.current.ServiceMchId = data.ServiceMchId; // 服务商id\r\n\t\t\t\t\t\t\t\t// 服务商信息\r\n\t\t\t\t\t\t\t\t_self.svcMch.Name = data.SvcName;\r\n\t\t\t\t\t\t\t\t_self.svcMch.LinkMan = data.SvcLinkMan;\r\n\t\t\t\t\t\t\t\t_self.svcMch.LinkTel = data.SvcLinkTel;\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t_self.productStatus = \"more\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: function(errors) {\r\n\t\t\t\t\t\tconsole.log(\"获取设备fail=>\", errors);\r\n\t\t\t\t\t\t_self.productStatus = \"more\";\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t *  获取当前所有分店\r\n\t\t\t *  @param {Number} MchId 总店id\r\n\t\t\t */\r\n\t\t\tfullOrg_request: function(MchId) {\r\n\t\t\t\tthis.shopMerchLoading = true;\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: _self.website + '/api/SvcMerchant/Get?topMchId='+MchId,\r\n\t\t\t\t\theader: {\r\n\t\t\t\t\t\tAuthorization: 'Bearer ' + _self.Token\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmethod: 'GET',\r\n\t\t\t\t\tsuccess: function(result) {\r\n\t\t\t\t\t\t_self.shopMerchLoading = false;\r\n\t\t\t\t\t\tconsole.log(\"请求分店success=>\",result);\r\n\t\t\t\t\t\tif (result.statusCode == 200) {\r\n\t\t\t\t\t\t\tif (result.data.ResultCode == \"0\") {\r\n\t\t\t\t\t\t\t\tvar data = result.data.Data;\r\n\t\t\t\t\t\t\t\t_self.shopMerch_list = data;\r\n\t\t\t\t\t\t\t\t_self.shopMerch_list.forEach(item=>{\r\n\t\t\t\t\t\t\t\t\titem.label = item.Name + '(' + item. MchNo +')';\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}  \r\n\t\t\t\t\t\t} \r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: function(erros) {\r\n\t\t\t\t\t\t_self.shopMerchLoading = false;\r\n\t\t\t\t\t\tconsole.log(\"请求组织机构fail=>\",erros);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcomplete: function() {}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t/** 根据门店、分类、型号获信息\r\n\t\t\t * @param {Object} mchId 门店Id\r\n\t\t\t * @param {Object} categoryId 分类Id\r\n\t\t\t * @param {Object} modelId 型号id\r\n\t\t\t */\r\n\t\t\tserverMch_request: function(mchId , categoryId , modelId){\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl : _self.website + '/api/SvcCategory/GetSvcMch?mchId='+mchId + '&categoryId=' + categoryId +'&vueId=' + modelId,\r\n\t\t\t\t\theader: {\r\n\t\t\t\t\t\tAuthorization: 'Bearer ' + _self.Token\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmethod: 'GET',\r\n\t\t\t\t\tsuccess : function(result){\r\n\t\t\t\t\t\tif(result.statusCode === 200){\r\n\t\t\t\t\t\t\tif(result.data.ResultCode === '0'){\r\n\t\t\t\t\t\t\t\t_self.svcMch = result.data.Data;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 保存工单请求\r\n\t\t\t * @param {Boolean} isEdit 是否已编辑\r\n\t\t\t */\r\n\t\t\tsaveRepair_request: function(isEdit) {\r\n\t\t\t\tconsole.log(\"保存工单\", _self.current);\r\n\t\t\t\tvar url = \"\";\r\n\t\t\t\tif (isEdit) {\r\n\t\t\t\t\turl = \"/api/SvcOrder/Update\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\turl = \"/api/SvcOrder/Add\";\r\n\t\t\t\t}\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '工单保存中……'\r\n\t\t\t\t});\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: _self.website + url,\r\n\t\t\t\t\theader: {\r\n\t\t\t\t\t\tAuthorization: 'Bearer ' + _self.Token\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\tdata: _self.current,\r\n\t\t\t\t\tsuccess: function(result) {\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tconsole.log(\"工单保存success=>\", result);\r\n\t\t\t\t\t\tif (result.statusCode === 200) {\r\n\t\t\t\t\t\t\tif (result.data.ResultCode === \"0\") {\r\n\t\t\t\t\t\t\t\tvar data = result.data.Data;\r\n\t\t\t\t\t\t\t\tif (!_self.isEdit) {\r\n\t\t\t\t\t\t\t\t\t_self.current.OrderId = data;\r\n\t\t\t\t\t\t\t\t\t_self.isEdit = true;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: '工单保存成功!'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t_self.orderImg_request(_self.current.OrderId); // 重新获取图片信息\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '报障工单保存失败！',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: function(errors) {\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tconsole.log(\"工单保存fail=>\", errors);\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '报障工单保存失败！',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 提交工单请求\r\n\t\t\t * @param {Boolean} isEdit 是否已编辑\r\n\t\t\t */\r\n\t\t\tsubmit_request: function(isEdit) {\r\n\t\t\t\tvar url = \"/api/SvcOrder/Submit\";\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '工单提交中……'\r\n\t\t\t\t});\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: _self.website + url,\r\n\t\t\t\t\theader: {\r\n\t\t\t\t\t\tAuthorization: 'Bearer ' + _self.Token\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\tdata: _self.current,\r\n\t\t\t\t\tsuccess: function(result) {\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tconsole.log(\"工单提交success=>\", result);\r\n\t\t\t\t\t\tif (result.statusCode === 200) {\r\n\t\t\t\t\t\t\tif (result.data.ResultCode === \"0\") {\r\n\t\t\t\t\t\t\t\tvar data = result.data.Data;\r\n\t\t\t\t\t\t\t\t// 返回工单id OrderId\r\n\t\t\t\t\t\t\t\t_self.submitOrder_success(data);\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: result.data.ResultMsg,\r\n\t\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '工单提交失败！',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: function(errors) {\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tconsole.log(\"工单提交fail=>\", errors);\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '报障工单提交失败！',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// ====================================================================================================================\r\n\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\r\n"],"sourceRoot":""}