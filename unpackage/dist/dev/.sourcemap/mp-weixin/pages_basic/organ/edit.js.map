{"version":3,"sources":["uni-app:///main.js","webpack:///D:/MyRepository/App/Uni-App/AftersveClientApp/pages_basic/organ/edit.vue?458f","webpack:///D:/MyRepository/App/Uni-App/AftersveClientApp/pages_basic/organ/edit.vue?4c59","webpack:///D:/MyRepository/App/Uni-App/AftersveClientApp/pages_basic/organ/edit.vue?3479","webpack:///D:/MyRepository/App/Uni-App/AftersveClientApp/pages_basic/organ/edit.vue?573a","uni-app:///pages_basic/organ/edit.vue"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,iG;AACAA,UAAU,CAACC,aAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAiH;AACjH;AACwD;AACL;;;AAGnD;AACuL;AACvL,gBAAgB,2LAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,+EAAM;AACR,EAAE,wFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,mFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,wLAEN;AACP,KAAK;AACL;AACA,aAAa,sTAEN;AACP,KAAK;AACL;AACA,aAAa,oVAEN;AACP,KAAK;AACL;AACA,aAAa,oPAEN;AACP,KAAK;AACL;AACA,aAAa,qXAEN;AACP,KAAK;AACL;AACA,aAAa,0MAEN;AACP;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC1DA;AAAA;AAAA;AAAA;AAAqsB,CAAgB,orBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACoGztB;AACA,6F;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AARA;;;;IAMA;AACA;AACA;AACA,W,CACA;AACA,+BACA,aACA,uBACA,MACA,QACA,wBACA,MANA,CASA,U,eACA,EACA,IADA,kBACA,CACA,SACA;AACA,4CAFA,EAEA;AAEA;AACA,iBACA,QADA,EACA;AACA,gDAFA,EAEA;AACA,iBAHA,EAGA;AACA,gBAJA,EAIA;AACA,iBALA,EAKA;AACA,oBANA,EAMA;AACA,oBAPA,EAOA;AACA,mBARA,EAQA;AACA,mBATA,EASA;AACA,eAVA,CAUA;AAVA,OALA,EAiBA,SACA,SACA,UACA,cADA,EAEA,oDAFA,GADA,EADA,EAOA,QACA,UACA,cADA,EAEA,sDAFA,GADA,EAPA,EAaA,QACA,6BADA,EAbA,EAjBA,EAiCA;AACA,oBAlCA,EAkCA;AACA,yBAnCA,EAmCA;AACA,qBApCA,EAoCA;AACA,oBArCA,EAqCA;AACA,mDAtCA,EAsCA;AACA,qDAvCA,CAuCA;AAvCA,MAyCA,CA3CA,EA4CA,YACA;AACA,2BACA,wBACA,CAJA,EAKA,yCACA,2BACA,CAPA,EAQA,mCACA,wBACA,CAVA,EA5CA,EAwDA,kCACA,aACA,wBAFA,CAEA;AACA,wBAHA,CAGA;AACA,6BACA,iCACA,CACA,CA/DA,EAgEA,6BACA;AACA,yCACA,CAnEA,EAoEA,2BACA;AACA,mDACA,gDACA,kCACA,CAFA,EAGA,CACA,CA3EA,EA4EA,WACA;AACA;;OAGA,wCACA,gEADA,CACA;AACA,uFAFA,CAEA;AACA,+EAHA,CAGA;AACA,KATA,EAUA;;UAGA,uCACA;AACA,yCACA,cADA,EAEA,0BAFA,EAGA,QACA,0BADA,EAEA,cAFA,EAGA,gBAHA,EAIA,WAJA,EAHA,EASA,iDACA,6BACA,8BACA,aACA,SADA,EAEA,WAFA,GAIA,+BAEA,CAlBA,IAoBA,CAnCA,EAoCA;AACA;;OAGA,iDACA,0BACA,CA1CA,EA2CA;;wFAGA,+CACA,mCACA,CAhDA,EAiDA;;gLAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBARA;;AAUA,KA/DA;AAgEA;;;AAGA,QAnEA,gBAmEA,IAnEA,EAmEA;AACA;AACA,YADA;AAEA,UAFA,CAEA;AACA;AACA,4CADA;AAEA,gDAFA;AAGA;AACA;AACA;AACA;AACA,WAPA;;AASA,OAZA;AAaA,WAbA,CAaA;AACA,OAdA;AAeA,KAnFA;AAoFA;;;AAGA;AACA;AACA,4CADA;AAEA,gDAFA;AAGA;AACA;AACA;AACA;AACA,SAPA;;AASA,KAjGA;AAkGA;AACA;;;AAGA;AACA;AACA,iBADA;AAEA;AACA;AACA,mDADA;;AAGA,SANA;AAOA;AACA;AACA;AACA;AACA,uGAFA,CAEA;AACA;AACA,SAbA;AAcA;AACA;AACA,SAhBA;;AAkBA,KAzHA;AA0HA;;;AAGA;AACA;AACA;AACA,2BADA;AAEA;AACA;AACA,mDADA;;AAGA,SANA;AAOA;AACA;AACA;AACA,6BAHA,CAGA;AACA;AACA,6DADA;;AAGA,SAdA;AAeA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBADA;AAEA,wBAFA;;AAIA,SAzBA;;AA2BA,KA1JA;AA2JA;;;AAGA;AACA;AACA,cADA;AAEA;AACA;AACA,mDADA;;AAGA,SANA;AAOA;AACA;AACA;AACA;AACA,+BADA,CACA;AACA;AACA,oDADA;;AAGA;AACA;AACA;AACA,0BADA;AAEA,wBAFA;;AAIA,SArBA;AAsBA;AACA;AACA;AACA,gDADA;AAEA,wBAFA;;AAIA,SA5BA;;AA8BA;AACA;AA9LA,GA5EA,E","file":"pages_basic/organ/edit.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages_basic/organ/edit.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./edit.vue?vue&type=template&id=ebb2081c&\"\nvar renderjs\nimport script from \"./edit.vue?vue&type=script&lang=js&\"\nexport * from \"./edit.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages_basic/organ/edit.vue\"\nexport default component.exports","export * from \"-!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./edit.vue?vue&type=template&id=ebb2081c&\"","var components\ntry {\n  components = {\n    isLogin: function() {\n      return import(\n        /* webpackChunkName: \"components/is-login/is-login\" */ \"@/components/is-login/is-login.vue\"\n      )\n    },\n    uniForms: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-forms/components/uni-forms/uni-forms\" */ \"@/uni_modules/uni-forms/components/uni-forms/uni-forms.vue\"\n      )\n    },\n    uniFormsItem: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-forms/components/uni-forms-item/uni-forms-item\" */ \"@/uni_modules/uni-forms/components/uni-forms-item/uni-forms-item.vue\"\n      )\n    },\n    staffsSelectsBox: function() {\n      return import(\n        /* webpackChunkName: \"components/staffs-selects-box/staffs-selects-box\" */ \"@/components/staffs-selects-box/staffs-selects-box.vue\"\n      )\n    },\n    luyjDataPicker: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/luyj-data-picker/components/luyj-data-picker/luyj-data-picker\" */ \"@/uni_modules/luyj-data-picker/components/luyj-data-picker/luyj-data-picker.vue\"\n      )\n    },\n    bottomBtns: function() {\n      return import(\n        /* webpackChunkName: \"components/bottom-btns/bottom-btns\" */ \"@/components/bottom-btns/bottom-btns.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./edit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./edit.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\t\t<!-- 判断是否登录 -->\r\n\t\t<is-login currentPage=\"index\"></is-login>\r\n\t\t<!-- 导航栏 -->\r\n\t\t<cu-custom bgColor=\"bg-cyan\" :isBack=\"preview\">\r\n\t\t\t<block slot=\"content\">{{ i18n_merchant.organ.nameBasic }}</block>\r\n\t\t</cu-custom>\r\n\t\t<!-- 导航栏 -->\r\n\t\t<uni-forms ref=\"form\" :value=\"current\" validate-trigger=\"bind\" err-show-type=\"undertext\">\r\n\t\t\t<!-- 编码 -->\r\n\t\t\t<uni-forms-item name=\"OrgNo\">\r\n\t\t\t\t<view class=\"cu-form-group solid-bottom\">\r\n\t\t\t\t\t<view class=\"title text-bold\">\r\n\t\t\t\t\t\t<text class=\"margin-right-xs\">{{ i18n_merchant.organ.orgNo }}</text>\r\n\t\t\t\t\t\t<text class=\"text-red\">*</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<input v-model=\"current.OrgNo\" :placeholder=\"i18n_merchant.organ.orgNoPlaceholder\" />\r\n\t\t\t\t</view>\r\n\t\t\t</uni-forms-item>\r\n\t\t\t<!-- 编码 -->\r\n\t\t\t<!-- 名称 -->\r\n\t\t\t<uni-forms-item name=\"Name\">\r\n\t\t\t\t<view class=\"cu-form-group solid-bottom\">\r\n\t\t\t\t\t<view class=\"title text-bold\">\r\n\t\t\t\t\t\t<text class=\"margin-right-xs\">{{ i18n_merchant.organ.orgName }}</text>\r\n\t\t\t\t\t\t<text class=\"text-red\">*</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<input v-model=\"current.Name\" :placeholder=\"i18n_merchant.organ.orgNamePlaceholder\" />\r\n\t\t\t\t</view>\r\n\t\t\t</uni-forms-item>\r\n\t\t\t<!-- 名称 -->\r\n\t\t\t<!-- 电话 -->\r\n\t\t\t<uni-forms-item name=\"Phone\">\r\n\t\t\t\t<view class=\"cu-form-group solid-bottom\">\r\n\t\t\t\t\t<view class=\"title text-bold\">{{ i18n_merchant.organ.phone }}</view>\r\n\t\t\t\t\t<input v-model=\"current.Phone\" :placeholder=\"i18n_merchant.organ.phonePlaceholder\" />\r\n\t\t\t\t</view>\r\n\t\t\t</uni-forms-item>\r\n\t\t\t<!-- 电话 -->\r\n\t\t\t<!-- 邮编 -->\r\n\t\t\t<uni-forms-item name=\"PostCode\">\r\n\t\t\t\t<view class=\"cu-form-group solid-bottom\">\r\n\t\t\t\t\t<view class=\"title text-bold\">{{ i18n_merchant.organ.postCode }}</view>\r\n\t\t\t\t\t<input v-model=\"current.PostCode\" :placeholder=\"i18n_merchant.organ.postCodePlaceholder\" />\r\n\t\t\t\t</view>\r\n\t\t\t</uni-forms-item>\r\n\t\t\t<!-- 邮编 -->\r\n\t\t\t<!-- 地址 -->\r\n\t\t\t<uni-forms-item name=\"Address\">\r\n\t\t\t\t<view class=\"cu-form-group solid-bottom\">\r\n\t\t\t\t\t<view class=\"title text-bold\">{{ i18n_merchant.organ.address }}</view>\r\n\t\t\t\t\t<textarea v-model=\"current.Address\"\r\n\t\t\t\t\t\t:placeholder=\"i18n_merchant.organ.addressPlaceholder\"></textarea>\r\n\t\t\t\t</view>\r\n\t\t\t</uni-forms-item>\r\n\t\t\t<!-- 地址 -->\r\n\t\t\t<!-- 主管 -->\r\n\t\t\t<uni-forms-item name=\"Manages\">\r\n\t\t\t\t<view class=\"cu-form-group solid-bottom\">\r\n\t\t\t\t\t<view class=\"title text-bold\" style=\"min-width: 60px;\">{{ i18n_merchant.organ.manages}}</view>\r\n\t\t\t\t\t<staffs-selects-box style=\"width: 100%;\" :orgId=\"current.OrgId\"  @changeF=\"changeManagersF\"></staffs-selects-box>\r\n\t\t\t\t\t<input v-show=\"false\" v-model=\"current.Managers\" />\r\n\t\t\t\t</view>\r\n\t\t\t</uni-forms-item>\r\n\t\t\t<!-- 主管 -->\r\n\t\t\t<!-- 上级部门 -->\r\n\t\t\t<uni-forms-item name=\"ParentId\">\r\n\t\t\t\t<view class=\"cu-form-group solid-bottom\">\r\n\t\t\t\t\t<view class=\"title text-bold\">{{ i18n_merchant.organ.parentId }}</view>\r\n\t\t\t\t\t<luyj-data-picker :placeholder=\"i18n_merchant.organ.parentIdPlaceholder\" style=\"width: 75%;\"\r\n\t\t\t\t\t\t:border=\"false\" :preload=\"true\" :localdata=\"organtrees\" :popup-title=\"i18n_organ.organTitle\"\r\n\t\t\t\t\t\t@nodeclick=\"changeParentId\" :value=\"current.ParentId\">\r\n\t\t\t\t\t</luyj-data-picker>\r\n\t\t\t\t</view>\r\n\t\t\t</uni-forms-item>\r\n\t\t\t<!-- 上级部门 -->\r\n\t\t\t<!-- 排序 -->\r\n\t\t\t<uni-forms-item name=\"Sort\">\r\n\t\t\t\t<view class=\"cu-form-group solid-bottom\">\r\n\t\t\t\t\t<view class=\"title text-bold\">{{ i18n_merchant.organ.sort}}</view>\r\n\t\t\t\t\t<input v-model=\"current.Sort\" type=\"number\" :placeholder=\"i18n_merchant.organ.sortPlaceholder\" />\r\n\t\t\t\t</view>\r\n\t\t\t</uni-forms-item>\r\n\t\t\t<!-- 排序 -->\r\n\t\t</uni-forms>\r\n\t\t<!-- 底部按钮 -->\r\n\t\t<bottom-btns :btns=\"current.OrgId > 0 ? btn_list_edit : btn_list_add\" @click=\"clickBottom\"></bottom-btns>\r\n\t\t<!-- 底部按钮 -->\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\t/**\r\n\t * 添加部门或编辑部门\r\n\t * @author 陆彦捷\r\n\t * @description  添加或编辑部门\r\n\t */\r\n\r\n\t// 条件引入语言\r\n\timport lang from '@/common/variable/lang.js'; // 语言\r\n\timport zhCN from '../../utils/lang/zh-Cn.js'; // 中文\r\n\tvar mylang;\r\n\t// 根据配置文件选择语言\r\n\tswitch (lang.locale) {\r\n\t\tcase 'zh-CN':\r\n\t\t\tmylang = zhCN;\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\tmylang = zhCN;;\r\n\t\t\tbreak;\r\n\t}\r\n\r\n\tvar _self;\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\t// 与样式有关参数\r\n\t\t\t\tpreview: this.global.publicF.hasBack(), // 是否返回上一页\r\n\r\n\t\t\t\t// 与系统有关参数\r\n\t\t\t\tcurrent: {\r\n\t\t\t\t\tOrgId: 0, // 部门id\r\n\t\t\t\t\tMchId: this.global.organ.getIndustryId(), // 组织Id\r\n\t\t\t\t\tOrgNo: \"\", // 部门编码\r\n\t\t\t\t\tName: \"\", // 部门名称\r\n\t\t\t\t\tPhone: \"\", // 部门联系电话\r\n\t\t\t\t\tManagers: [], // 负责人(数组、对应员工id)\r\n\t\t\t\t\tPostCode: \"\", // 邮编\r\n\t\t\t\t\tAddress: \"\", // 地址信息\r\n\t\t\t\t\tParentId: 0, // 上级部门\r\n\t\t\t\t\tSort: 0, // 排序\r\n\t\t\t\t},\r\n\t\t\t\trules: {\r\n\t\t\t\t\tOrgNo: {\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\terrorMessage: mylang.merchant.organ.orgNoPlaceholder\r\n\t\t\t\t\t\t}, ]\r\n\t\t\t\t\t},\r\n\t\t\t\t\tName: {\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\terrorMessage: mylang.merchant.organ.orgNamePlaceholder\r\n\t\t\t\t\t\t}, ]\r\n\t\t\t\t\t},\r\n\t\t\t\t\tSort: {\r\n\t\t\t\t\t\trules: this.global.rules.sort\r\n\t\t\t\t\t},\r\n\t\t\t\t}, // 验证规则\r\n\t\t\t\tstaff_list: [], // 员工信息(用于选择部门负责人)\r\n\t\t\t\tchangeManages : null ,\t// 选择主管的方法\r\n\t\t\t\tfullorgTree: [], // 部门树形图\r\n\t\t\t\torgantrees: [], // 当前组织下的部门树形图\r\n\t\t\t\tbtn_list_add: this.global.params.btn_list_add, // 添加状态按钮\r\n\t\t\t\tbtn_list_edit: this.global.params.btn_list_edit // 编辑状态按钮\r\n\t\t\t};\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\t// 国际化\r\n\t\t\ti18n : function(){\r\n\t\t\t\treturn this.$t('basic');\r\n\t\t\t},\r\n\t\t\ti18n_merchant: function() {\r\n\t\t\t\treturn this.$t('merchant');\r\n\t\t\t},\r\n\t\t\ti18n_organ: function() {\r\n\t\t\t\treturn this.$t(\"organ\");\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad: function(options) {\r\n\t\t\t_self = this;\r\n\t\t\tthis.getParams(options); // 初始化参数\r\n\t\t\tthis.init_request(); // 初始化请求\r\n\t\t\tif(this.current.OrgId){\r\n\t\t\t\tthis.getInfo(this.current.OrgId);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonReady: function() {\r\n\t\t\t// 初始化表单验证\r\n\t\t\tthis.$refs.form.setRules(this.rules);\r\n\t\t},\r\n\t\tonShow:function(){\r\n\t\t\t// 返回页面，修改主管\r\n\t\t\tif(typeof(this.changeManages) === \"function\"){\r\n\t\t\t\tthis.changeManages(function(staffs , staffIds){\r\n\t\t\t\t\t_self.current.Managers = staffIds;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// ================================================ 初始化 =======================================================\r\n\t\t\t/** 初始化请求方法\r\n\t\t\t * @param {Object} options\r\n\t\t\t */\r\n\t\t\tgetParams: function(options) {\r\n\t\t\t\tthis.current.OrgId = Boolean(options.OrgId) ? options.OrgId : 0; // 部门Id\r\n\t\t\t\tthis.current.MchId = Boolean(options.MchId) ? options.MchId : this.current.MchId; // 组织Id\r\n\t\t\t\tthis.current.ParentId = Boolean(options.ParentId) ? options.ParentId : 0; // 上级Id\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 初始化请求方法\r\n\t\t\t */\r\n\t\t\tinit_request: function() {\r\n\t\t\t\t// 请求部门树形图\r\n\t\t\t\tthis.global.departmentR.getTrees({\r\n\t\t\t\t\tisFilter: true,\r\n\t\t\t\t\torgId: _self.current.OrgId,\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tmchId: _self.current.MchId,\r\n\t\t\t\t\t\tloadMch: false,\r\n\t\t\t\t\t\tloadStaff: false,\r\n\t\t\t\t\t\tdataType: 1\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: function(fulldata, filterdata) {\r\n\t\t\t\t\t\t_self.fullorgTree = fulldata;\r\n\t\t\t\t\t\t_self.organtrees = filterdata;\r\n\t\t\t\t\t\tlet temp = {\r\n\t\t\t\t\t\t\ttext :'无',\r\n\t\t\t\t\t\t\tvalue: null\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\t_self.organtrees.unshift(temp);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// ================================================ 监听事件 =====================================================\r\n\t\t\t/** 获取修改主管方法\r\n\t\t\t * @param {Object} func\r\n\t\t\t */\r\n\t\t\tchangeManagersF : function(func){\r\n\t\t\t\tthis.changeManages = func;\r\n\t\t\t},\r\n\t\t\t/** 修改上级部门\r\n\t\t\t * @param {Object} e\r\n\t\t\t */\r\n\t\t\tchangeParentId: function(item) {\r\n\t\t\t\tthis.current.ParentId = item.value;\r\n\t\t\t},\r\n\t\t\t/** 点击底部按钮\r\n\t\t\t * @param {String} name\r\n\t\t\t */\r\n\t\t\tclickBottom: function(name) {\r\n\t\t\t\tswitch (name) {\r\n\t\t\t\t\tcase 'edit':\r\n\t\t\t\t\t\tthis.save('form');\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'delete':\r\n\t\t\t\t\t\tthis.delete();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t/** 添加/编辑部门请求\r\n\t\t\t * @param {String} form 表单名称\r\n\t\t\t */\r\n\t\t\tsave(form) {\r\n\t\t\t\tthis.$refs[form]\r\n\t\t\t\t\t.submit()\r\n\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\ttitle: _self.i18n.modal_save_title,\r\n\t\t\t\t\t\t\tcontent: _self.i18n.modal_save_content,\r\n\t\t\t\t\t\t\tsuccess:function(result){\r\n\t\t\t\t\t\t\t\tif(result.confirm){\r\n\t\t\t\t\t\t\t\t\t_self.saveInfo();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(errors => {\r\n\t\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 删除部门\r\n\t\t\t */\r\n\t\t\tdelete : function(){\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: _self.i18n.modal_delete_title,\r\n\t\t\t\t\tcontent: _self.i18n.modal_delete_content,\r\n\t\t\t\t\tsuccess:function(result){\r\n\t\t\t\t\t\tif(result.confirm){\r\n\t\t\t\t\t\t\t_self.deleteInfo(_self.current.OrgId);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// =========================================== 请求数据 ===================================================================\r\n\t\t\t/** 获取当前部门信息\r\n\t\t\t * @param {Number} orgId 部门Id\r\n\t\t\t */\r\n\t\t\tgetInfo : function(orgId){\r\n\t\t\t\tthis.global.departmentR.getInfo({\r\n\t\t\t\t\tid : orgId,\r\n\t\t\t\t\tbefore : function(){\r\n\t\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\t\ttitle:_self.i18n.requestLoadingMessage\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess:function(data){\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tif(Boolean(data)){\r\n\t\t\t\t\t\t\t_self.current = data;\r\n\t\t\t\t\t\t\t_self.current.ParentId = _self.current.ParentId? _self.current.ParentId.toString() :null;\t\t// 将上级部门改为字符串类型（为了显示）\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail:function(){\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 保存部门信息\r\n\t\t\t */\r\n\t\t\tsaveInfo : function(){\r\n\t\t\t\tvar func = _self.current.OrgId != 0 ? _self.global.departmentR.updateInfo : _self.global.departmentR.addInfo;\r\n\t\t\t\tfunc({\r\n\t\t\t\t\tdata : _self.current,\r\n\t\t\t\t\tbefore : function(){\r\n\t\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\t\ttitle: _self.i18n.requestLoadingMessage\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess : function(data){\r\n\t\t\t\t\t\t// 请求成功后执行方法\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tuni.navigateBack();\t\t// 返回到上一页\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: _self.current.OrgId != 0 ? '更新成功' : '添加成功',\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail : function(errors){\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tvar temp = '系统错误';\r\n\t\t\t\t\t\tif (Boolean(errors.statusCode)) {\r\n\t\t\t\t\t\t\ttemp = errors.data.ResultMsg\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: temp,\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t/** 根据id删除当前部门信息\r\n\t\t\t * @param {Number} id 部门id\r\n\t\t\t */\r\n\t\t\tdeleteInfo : function(id){\r\n\t\t\t\tthis.global.departmentR.deleteInfo({\r\n\t\t\t\t\tid : id,\r\n\t\t\t\t\tbefore : function(){\r\n\t\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\t\ttitle: _self.i18n.requestLoadingMessage\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess : function(data , message){\r\n\t\t\t\t\t\t// 请求成功后执行方法\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tif(Boolean(data)){\r\n\t\t\t\t\t\t\tuni.navigateBack();\t\t// 返回到上一页\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: _self.i18n.deleteSuccessMessage,\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle:message,\r\n\t\t\t\t\t\t\ticon:'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail : function(errors){\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: _self.i18n.requestFailMessage,\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// =======================================================================================================================\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\r\n"],"sourceRoot":""}